<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ToMoreBeyond - 面白いことだけをする。友と共に道なき道を越える</title>
  <meta name="description" content="ToMoreBeyondは最先端のAI技術とイノベーションで、より良い未来を創造するテクノロジーカンパニーです。">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;700;800;900&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #ffffff;
      overflow-x: hidden;
      min-height: 100vh;
      position: relative;
    }
    
    /* 左上ロゴ - より洗練されたデザイン */
    .logo {
      position: fixed;
      top: 30px;
      left: 30px;
      z-index: 1000;
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      font-weight: 700;
      color: #1a1a1a;
      text-decoration: none;
      letter-spacing: -0.5px;
      transition: all 0.3s ease;
      background: linear-gradient(135deg, #1a1a1a 0%, #FFB300 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .logo:hover {
      transform: scale(1.05);
    }
    
    /* ナビゲーションバーを削除（不要） */
    
    /* メインコンテンツ */
    .main-content {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 50px;
    }
    
    /* damso.com風カードコンテナ */
    .cards-container {
      width: 100%;
      max-width: 1200px;
      height: 400px;
      position: relative;
      overflow: hidden;
      background: transparent;
      display: flex;
      align-items: center;
    }
    
    .cards-track {
      display: flex;
      gap: 20px;
      height: 100%;
      will-change: transform;
      backface-visibility: hidden;
      contain: layout style paint;
      transform-style: preserve-3d;
      transform: translateX(0px) translateZ(0);
      visibility: visible;
      opacity: 1;
    }
    
    /* スクロール中は完全に滑らか（遷移なし） */
    .cards-track.scrolling {
      transition: none;
      transform-origin: center center;
    }
    
    /* スクロール停止時は軽い遷移 */
    .cards-track.idle {
      transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1);
    }
    
    /* 洗練されたカードデザイン */
    .card {
      min-width: 320px;
      height: 380px;
      background: linear-gradient(135deg, #ffffff 0%, #fafafa 100%);
      border: 1px solid #f0f0f0;
      border-radius: 20px;
      padding: 40px 30px;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      position: relative;
      box-shadow: 
        0 4px 20px rgba(0,0,0,0.04),
        0 1px 3px rgba(0,0,0,0.02);
      overflow: hidden;
    }
    
    .card:hover {
      transform: translateY(-12px) scale(1.02);
      box-shadow: 
        0 20px 60px rgba(0,0,0,0.12),
        0 8px 30px rgba(255,179,0,0.08);
      border-color: #FFB300;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #FFB300, #FFA000);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.4s ease;
    }
    
    .card:hover::before {
      transform: scaleX(1);
    }
    
    .card::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(circle at center, 
        rgba(255,179,0,0.03) 0%, 
        transparent 70%);
      opacity: 0;
      transition: opacity 0.4s ease;
      border-radius: 20px;
    }
    
    .card:hover::after {
      opacity: 1;
    }
    
    .card-icon {
      font-size: 56px;
      margin-bottom: 28px;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
      transition: transform 0.3s ease;
    }
    
    .card:hover .card-icon {
      transform: scale(1.1);
    }
    
    .card-title {
      font-family: 'Playfair Display', serif;
      font-size: 26px;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 16px;
      letter-spacing: -0.5px;
    }
    
    .card-description {
      font-size: 16px;
      color: #666;
      line-height: 1.6;
      font-weight: 400;
    }
    
    /* 石畳の道デザイン */
    .path-area {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;
      z-index: 100;
      background: #8b8680;
      overflow: hidden;
      perspective: 1000px;
    }
    
    /* 石畳パターン */
    .stone-pattern {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      display: flex;
    }
    
    /* 石ブロック */
    .stone-block {
      width: 50px;
      height: 100%;
      position: relative;
      flex-shrink: 0;
      background: 
        linear-gradient(135deg, 
          #a0a0a0 0%, 
          #8d8d8d 25%, 
          #7a7a7a 50%, 
          #8d8d8d 75%, 
          #a0a0a0 100%);
      border-right: 1px solid rgba(0, 0, 0, 0.15);
      border-left: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 
        inset 0 2px 4px rgba(255, 255, 255, 0.1),
        inset 0 -2px 4px rgba(0, 0, 0, 0.15);
    }
    
    /* 石の質感 */
    .stone-block::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image:
        radial-gradient(circle at 25% 30%, rgba(255, 255, 255, 0.2) 1px, transparent 1px),
        radial-gradient(circle at 75% 70%, rgba(0, 0, 0, 0.1) 1px, transparent 1px),
        linear-gradient(45deg, transparent 45%, rgba(255, 255, 255, 0.05) 50%, transparent 55%);
      background-size: 12px 12px, 18px 18px, 8px 8px;
      opacity: 0.7;
    }
    
    /* 道の輪郭と影 */
    .path-shadow {
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 100%;
      height: 10px;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), transparent);
      filter: blur(5px);
    }
    
    /* 道路脇の自然な芝生と小石 */
    .grass-area {
      position: absolute;
      top: -40px;
      left: 0;
      width: 100%;
      height: 40px;
      background: 
        linear-gradient(180deg, 
          #7CB342 0%,
          #689F38 30%,
          #558B2F 70%,
          #33691E 100%
        );
      position: relative;
      overflow: hidden;
    }
    
    /* 道の両脇の小石や草 */
    .path-decoration {
      position: fixed;
      bottom: 80px;
      left: 0;
      width: 100%;
      height: 20px;
      pointer-events: none;
      z-index: 90;
    }
    
    .decoration-item {
      width: 12px;
      height: 12px;
      position: absolute;
      animation: decorSway 6s ease-in-out infinite;
    }
    
    .decoration-item::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
    }
    
    /* 小石（シンプル化） */
    .decoration-item.stone::before {
      width: 6px;
      height: 4px;
      background: #666;
      border-radius: 50%;
      box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }
    
    
    @keyframes decorSway {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-1px); }
    }
    
    
    
    
    /* 適切なサイズの棒人間（100px height） - 道の上に立つ */
    .tiny-character {
      position: fixed;
      bottom: 60px; /* 道路の上に立つように調整 */
      left: 50%;
      transform: translateX(-50%) translateZ(0);
      width: 100px;
      height: 100px;
      z-index: 150;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
      contain: layout style paint;
      will-change: transform;
      backface-visibility: hidden;
      transition: filter 0.3s ease;
    }
    
    
    /* GIF風コマ送り歩行アニメーション */
    .walking-animation-container {
      position: relative;
      width: 100%;
      height: 100%;
    }
    
    .walk-frame {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      visibility: hidden;
    }
    
    /* 各フレームの表示タイミング */
    .walk-frame.active {
      opacity: 1;
      visibility: visible;
    }
    
    /* アイドル状態は立ち姿勢フレームを表示 */
    .tiny-character:not(.walking) .walk-frame.idle {
      opacity: 1;
      visibility: visible;
      animation: idleSwaying 4s ease-in-out infinite;
    }
    
    @keyframes idleSwaying {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      25% { transform: translateY(-1px) rotate(0.5deg); }
      50% { transform: translateY(0px) rotate(0deg); }
      75% { transform: translateY(-1px) rotate(-0.5deg); }
    }
    
    /* 棒人間の視線動作 */
    .tiny-character.looking-left .walk-frame.idle circle {
      transform: translateX(-2px);
      transition: transform 0.3s ease;
    }
    
    .tiny-character.looking-right .walk-frame.idle circle {
      transform: translateX(2px);
      transition: transform 0.3s ease;
    }
    
    /* 指差しフレーム */
    .walk-frame.pointing {
      transition: opacity 0.3s ease;
    }
    
    /* GIF風コマ送り歩行（4フレーム） */
    .walking-animation {
      pointer-events: none;
    }
    
    /* 歩行速度クラス */
    .walking-slow {
      --walk-duration: 0.8s;
    }
    
    .walking-normal {
      --walk-duration: 0.6s;
    }
    
    .walking-fast {
      --walk-duration: 0.4s;
    }
    
    .walking-very-fast {
      --walk-duration: 0.3s;
    }
    
    /* 左右の向き対応 */
    .tiny-character.facing-left .walking-animation-container {
      transform: scaleX(-1);
    }
    
    .tiny-character.facing-right .walking-animation-container {
      transform: scaleX(1);
    }
    
    /* セクション別道の色 */
    .section-apps .path-area { background: #f0f8f0; }
    .section-company .path-area { background: #fff8f0; }
    .section-members .path-area { background: #f8f0f8; }
    .section-media .path-area { background: #f0f8ff; }
    .section-contact .path-area { background: #fff0f0; }
    
    .section-apps .path-line { background: #4CAF50; }
    .section-company .path-line { background: #FFB300; }
    .section-members .path-line { background: #9C27B0; }
    .section-media .path-line { background: #2196F3; }
    .section-contact .path-line { background: #FF5722; }
    
    /* 高速歩行モード - スムーズな走行 */
    .walking.fast-walking .walk-frame.frame1,
    .walking.fast-walking .walk-frame.frame2,
    .walking.fast-walking .walk-frame.frame3 {
      animation-duration: 0.3s !important;
    }
    
    /* カードハイライト効果 */
    .card.highlighted {
      transform: translateY(-15px) scale(1.05) !important;
      box-shadow: 
        0 25px 70px rgba(255,179,0,0.3),
        0 10px 35px rgba(255,179,0,0.2) !important;
      border-color: #FFB300 !important;
      animation: highlightPulse 1.5s ease-in-out infinite;
    }
    
    @keyframes highlightPulse {
      0%, 100% { 
        box-shadow: 
          0 25px 70px rgba(255,179,0,0.3),
          0 10px 35px rgba(255,179,0,0.2);
      }
      50% { 
        box-shadow: 
          0 30px 80px rgba(255,179,0,0.4),
          0 15px 40px rgba(255,179,0,0.3);
      }
    }
    
    /* 視線エフェクト */
    @keyframes gazeFlash {
      0% { 
        opacity: 0;
        transform: rotate(var(--angle, 90deg)) scaleY(0);
      }
      50% {
        opacity: 1;
      }
      100% { 
        opacity: 0;
        transform: rotate(var(--angle, 90deg)) scaleY(1);
      }
    }
    
    /* スクロール時の軽量化 */
    .scrolling .walk-frame {
      contain: strict;
      transform: translateZ(0);
    }
    
    /* 低性能デバイス向け最適化 */
    .low-performance-mode .walking .walk-frame.frame1,
    .low-performance-mode .walking .walk-frame.frame2,
    .low-performance-mode .walking .walk-frame.frame3 {
      animation-duration: 0.8s !important;
      will-change: auto;
    }
    
    .low-performance-mode .tiny-character {
      filter: none;
      contain: layout;
    }
    
    .low-performance-mode .weed {
      display: none;
    }
    
    .low-performance-mode .card {
      transition: transform 0.2s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    
    .low-performance-mode .card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }
    
    .low-performance-mode .cards-track {
      transition: none !important;
    }
    
    /* damso.com風のクリーンなエフェクト */
    .cards-container::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        linear-gradient(to right, 
          rgba(255,255,255,0.9) 0%, 
          transparent 15%, 
          transparent 85%, 
          rgba(255,255,255,0.9) 100%);
      pointer-events: none;
      z-index: 2;
    }
    
    /* パフォーマンス最適化 */
    .card {
      will-change: transform, opacity, filter;
      backface-visibility: hidden;
      transform-origin: center center;
    }
    
    .cards-track {
      will-change: transform;
      backface-visibility: hidden;
      transform-origin: center center;
    }
    
    
    /* レスポンシブ - モバイル最適化 */
    @media (max-width: 768px) {
      .logo { 
        font-size: 22px; 
        top: 15px; 
        left: 15px;
        z-index: 1001;
      }
      
      .main-content { 
        padding: 0 15px;
        height: 100vh;
        display: flex;
        align-items: center;
      }
      
      /* モバイル用カード調整 */
      .cards-container {
        height: 350px;
        width: 100%;
        overflow: hidden;
      }
      
      .cards-track {
        gap: 15px;
      }
      
      .card { 
        min-width: 280px; 
        height: 320px; 
        padding: 30px 20px;
        border-radius: 16px;
      }
      
      .card-icon { 
        font-size: 48px;
        margin-bottom: 20px;
      }
      
      .card-title { 
        font-size: 22px;
        margin-bottom: 12px;
      }
      
      .card-description { 
        font-size: 15px;
        line-height: 1.5;
      }
      
      /* モバイル用棒人間調整 - より見やすく */
      .tiny-character { 
        width: 80px; 
        height: 80px;
        bottom: 10px;
      }
      
      .walk-frame g {
        stroke-width: 5;
      }
      
      /* モバイル用道調整 */
      .path-area {
        height: 40px;
      }
      
      .tiny-character {
        bottom: 40px;
      }
      
      .road-element {
        font-size: 10px;
      }
      
      /* カードのホバーエフェクトを無効化 */
      .card:hover {
        transform: none;
        box-shadow: 
          0 2px 8px 0 rgba(0, 0, 0, 0.06);
      }
      
      /* グラデーションエフェクトの調整 */
      .cards-container::after {
        background: 
          linear-gradient(to right, 
            rgba(255,255,255,0.95) 0%, 
            transparent 10%, 
            transparent 90%, 
            rgba(255,255,255,0.95) 100%);
      }
    }
    
    /* タッチデバイス用最適化 */
    @media (hover: none) and (pointer: coarse) {
      .card:hover {
        transform: none !important;
      }
      
      .card:active {
        transform: 
          translateX(0px) 
          translateZ(30px) 
          rotateY(0deg) 
          scale(1.02) !important;
        transition: all 0.2s ease;
      }
      
      /* タッチ時の雑草反応 */
      .weed {
        animation-duration: 2s;
      }
    }
  </style>
</head>
<body class="section-apps">
  <!-- 左上ロゴ -->
  <a href="#" class="logo">ToMoreBeyond</a>
  
  <!-- ナビゲーションバー削除（シンプル化） -->
  
  <!-- メインコンテンツ -->
  <main class="main-content">
    <div class="cards-container">
      <div class="cards-track" id="cardsTrack">
        <!-- カードはJavaScriptで生成 -->
      </div>
    </div>
  </main>
  
  <!-- 石畳の道エリア -->
  <div class="path-area">
    <div class="stone-pattern" id="stonePattern"></div>
    <div class="path-shadow"></div>
  </div>
  
  <!-- 装飾 -->
  <div class="path-decoration" id="pathDecoration"></div>
  
  <!-- GIF風コマ送り歩行アニメーション棒人間 -->
  <div class="tiny-character walking-normal">
    <div class="walking-animation-container">
      
      <!-- アイドルフレーム: 立ち姿勢 -->
      <svg class="walk-frame idle active" viewBox="0 0 100 150">
        <g stroke="#333" stroke-width="6" stroke-linecap="round" fill="none">
          <!-- 頭 -->
          <circle cx="50" cy="20" r="12" fill="#333" stroke="none"/>
          <!-- 胴体 -->
          <line x1="50" y1="32" x2="50" y2="65"/>
          <!-- 左腕（リラックス） -->
          <line x1="50" y1="40" x2="42" y2="52"/>
          <line x1="42" y1="52" x2="40" y2="68"/>
          <!-- 右腕（リラックス） -->
          <line x1="50" y1="40" x2="58" y2="52"/>
          <line x1="58" y1="52" x2="60" y2="68"/>
          <!-- 左脚 -->
          <line x1="50" y1="65" x2="46" y2="87"/>
          <line x1="46" y1="87" x2="45" y2="110"/>
          <!-- 右脚 -->
          <line x1="50" y1="65" x2="54" y2="87"/>
          <line x1="54" y1="87" x2="55" y2="110"/>
        </g>
      </svg>
      
      <!-- フレーム1: 歩行ポーズ（左脚前・目標を見据える） -->
      <svg class="walk-frame frame1" viewBox="0 0 100 150">
        <g stroke="#333" stroke-width="6" stroke-linecap="round" fill="none">
          <!-- 頭（前方を見据える） -->
          <circle cx="52" cy="16" r="12" fill="#333" stroke="none"/>
          <!-- 胴体（前進の意志） -->
          <line x1="52" y1="28" x2="50" y2="62"/>
          <!-- 左腕（後方・力強く振る） -->
          <line x1="50" y1="36" x2="60" y2="46"/>
          <line x1="60" y1="46" x2="65" y2="62"/>
          <!-- 右腕（前方・バランス） -->
          <line x1="50" y1="36" x2="40" y2="46"/>
          <line x1="40" y1="46" x2="35" y2="62"/>
          <!-- 左脚（大きく前進） -->
          <line x1="50" y1="62" x2="35" y2="82"/>
          <line x1="35" y1="82" x2="28" y2="108"/>
          <!-- 右脚（力強い蹴り出し） -->
          <line x1="50" y1="62" x2="62" y2="82"/>
          <line x1="62" y1="82" x2="70" y2="100"/>
        </g>
      </svg>
      
      <!-- フレーム2: 歩行ポーズ（中間点・推進力） -->
      <svg class="walk-frame frame2" viewBox="0 0 100 150">
        <g stroke="#333" stroke-width="6" stroke-linecap="round" fill="none">
          <!-- 頭（目標への集中） -->
          <circle cx="51" cy="15" r="12" fill="#333" stroke="none"/>
          <!-- 胴体（前進エネルギー） -->
          <line x1="51" y1="27" x2="50" y2="61"/>
          <!-- 左腕（バランス調整） -->
          <line x1="50" y1="35" x2="44" y2="50"/>
          <line x1="44" y1="50" x2="42" y2="66"/>
          <!-- 右腕（リズム維持） -->
          <line x1="50" y1="35" x2="56" y2="50"/>
          <line x1="56" y1="50" x2="58" y2="66"/>
          <!-- 左脚（安定した支持） -->
          <line x1="50" y1="61" x2="46" y2="82"/>
          <line x1="46" y1="82" x2="45" y2="108"/>
          <!-- 右脚（次のステップ準備） -->
          <line x1="50" y1="61" x2="54" y2="82"/>
          <line x1="54" y1="82" x2="55" y2="105"/>
        </g>
      </svg>
      
      <!-- フレーム3: 歩行ポーズ（右脚前・確実な前進） -->
      <svg class="walk-frame frame3" viewBox="0 0 100 150">
        <g stroke="#333" stroke-width="6" stroke-linecap="round" fill="none">
          <!-- 頭（決意を持って前方注視） -->
          <circle cx="53" cy="16" r="12" fill="#333" stroke="none"/>
          <!-- 胴体（力強い前進） -->
          <line x1="53" y1="28" x2="51" y2="62"/>
          <!-- 左腕（前方・目標への意志） -->
          <line x1="51" y1="36" x2="38" y2="46"/>
          <line x1="38" y1="46" x2="32" y2="62"/>
          <!-- 右腕（後方・推進力） -->
          <line x1="51" y1="36" x2="64" y2="46"/>
          <line x1="64" y1="46" x2="70" y2="62"/>
          <!-- 左脚（後方・次への準備） -->
          <line x1="51" y1="62" x2="38" y2="82"/>
          <line x1="38" y1="82" x2="30" y2="100"/>
          <!-- 右脚（前方・大胆な一歩） -->
          <line x1="51" y1="62" x2="64" y2="82"/>
          <line x1="64" y1="82" x2="72" y2="108"/>
        </g>
      </svg>
      
      <!-- フレーム4: 歩行ポーズ（リズムの転換点） -->
      <svg class="walk-frame frame4" viewBox="0 0 100 150">
        <g stroke="#333" stroke-width="6" stroke-linecap="round" fill="none">
          <!-- 頭（前方への意識） -->
          <circle cx="50" cy="14" r="12" fill="#333" stroke="none"/>
          <!-- 胴体（エネルギー蓄積） -->
          <line x1="50" y1="26" x2="49" y2="61"/>
          <!-- 左腕（リズム作り） -->
          <line x1="49" y1="34" x2="42" y2="48"/>
          <line x1="42" y1="48" x2="40" y2="64"/>
          <!-- 右腕（バランス保持） -->
          <line x1="49" y1="34" x2="56" y2="48"/>
          <line x1="56" y1="48" x2="58" y2="64"/>
          <!-- 左脚（推進準備） -->
          <line x1="49" y1="61" x2="47" y2="83"/>
          <line x1="47" y1="83" x2="46" y2="108"/>
          <!-- 右脚（安定した踏み込み） -->
          <line x1="49" y1="61" x2="51" y2="83"/>
          <line x1="51" y1="83" x2="52" y2="108"/>
        </g>
      </svg>
      
    </div>
  </div>
  
  <script>
    // カードデータ
    const cardsData = [
      { icon: '🗺️', title: 'TADATAKA', description: '移動がそのまま日記になる', section: 'apps', link: 'pages/tadataka.html' },
      { icon: '🚽', title: 'ToiRun', description: '"今すぐトイレ"を最短で案内', section: 'apps', link: 'pages/toirun.html' },
      { icon: '📍', title: 'Meet in the Middle', description: '最適な集合地点を探す', section: 'apps', link: 'pages/midpoint.html' },
      { icon: '🏢', title: '会社概要', description: '道なき道を切り開く', section: 'company', link: 'detail/company.html' },
      { icon: '🎯', title: 'ミッション', description: '面白いことだけをする', section: 'company', link: 'detail/mission.html' },
      { icon: '👨‍💻', title: '山田', description: 'CDO / デザイナー', section: 'members', link: 'detail/yamada.html' },
      { icon: '🚀', title: '正留', description: 'CEO / エンジニア', section: 'members', link: 'detail/masadome.html' },
      { icon: '🎨', title: '安藤', description: 'アーティスト', section: 'members', link: 'detail/ando.html' },
      { icon: '📰', title: 'ブログ', description: '開発の裏話', section: 'media', link: 'detail/blog.html' },
      { icon: '🎥', title: '動画', description: 'プロダクト紹介', section: 'media', link: 'detail/video.html' },
      { icon: '📱', title: 'SNS', description: '日々の発信', section: 'media', link: 'detail/sns.html' },
      { icon: '💌', title: 'お問い合わせ', description: 'お気軽にどうぞ', section: 'contact', link: 'detail/contact.html' }
    ];
    
    class MinimalSite {
      constructor() {
        this.currentSection = 'apps';
        this.sections = ['apps', 'company', 'members', 'media', 'contact'];
        this.sectionIndex = 0;
        this.isScrolling = false;
        this.scrollTimer = null;
        this.baseScrollSpeed = 60;
        this.currentScrollSpeed = this.baseScrollSpeed;
        this.walkSpeed = 0.8;
        this.speedMultiplier = 1.0;
        this.isNavigating = false;
        
        // パフォーマンス最適化用のRAF管理
        this.rafId = null;
        this.lastTime = 0;
        
        this.init();
      }
      
      init() {
        this.createCards();
        this.setupEventListeners();
        this.createStonePattern();
        this.createPathDecorations();
        
        // カードが確実に表示されてから初期化
        setTimeout(() => {
          this.startAutoScroll();
          this.optimizePerformance();
        }, 100);
        
        // 初期状態でアイドルフレームを表示
        setTimeout(() => {
          const idleFrame = document.querySelector('.walk-frame.idle');
          if (idleFrame) {
            idleFrame.classList.add('active');
          }
        }, 100);
      }
      
      createStonePattern() {
        const pattern = document.getElementById('stonePattern');
        if (!pattern) return;
        
        // 石ブロックを生成
        const stoneCount = Math.ceil(window.innerWidth / 40) + 10;
        pattern.innerHTML = ''; // 既存のコンテンツをクリア
        
        for (let i = 0; i < stoneCount; i++) {
          const stone = document.createElement('div');
          stone.className = 'stone-block';
          
          // ランダムな幅で石畳感を演出
          const widthVariation = 50 + Math.random() * 30;
          stone.style.width = `${widthVariation}px`;
          
          // ランダムな色のバリエーション
          const brightness = 0.9 + Math.random() * 0.2;
          stone.style.filter = `brightness(${brightness})`;
          
          pattern.appendChild(stone);
        }
      }
      
      createPathDecorations() {
        const decoration = document.getElementById('pathDecoration');
        if (!decoration) return;
        
        decoration.innerHTML = '';
        
        // より少ない装飾でメモリ効率化
        for (let i = 0; i < 8; i++) {
          const item = document.createElement('div');
          item.className = 'decoration-item';
          
          // 石のみでシンプルに
          item.classList.add('stone');
          
          // 固定位置でメモリ効率化
          const positions = [10, 20, 30, 45, 60, 70, 80, 90];
          item.style.left = `${positions[i]}%`;
          
          // アニメーション遅延を最小限に
          item.style.animationDelay = `${i * 0.5}s`;
          
          decoration.appendChild(item);
        }
      }
      
      optimizePerformance() {
        // デバイス能力を検出
        this.detectDeviceCapability();
        
        // メモリ効率のためのRAF最適化
        this.startRAFLoop();
        
        // 不要なイベントを削除するデバウンス機能
        this.debounceCleanup();
        
        // GPU最適化
        this.enableGPUOptimizations();
      }
      
      detectDeviceCapability() {
        // 低性能デバイスを検出
        this.isLowEndDevice = (
          (navigator.deviceMemory && navigator.deviceMemory <= 2) ||
          (navigator.hardwareConcurrency && navigator.hardwareConcurrency <= 2) ||
          /Android.*Chrome\/[0-8]/.test(navigator.userAgent) ||
          /iPhone.*OS [1-1][0-3]/.test(navigator.userAgent) ||
          window.innerWidth < 768
        );
        
        // 中程度の性能デバイス
        this.isMidEndDevice = (
          (navigator.deviceMemory && navigator.deviceMemory <= 4) ||
          (navigator.hardwareConcurrency && navigator.hardwareConcurrency <= 4)
        );
        
        if (this.isLowEndDevice) {
          document.body.classList.add('low-performance-mode');
        } else if (this.isMidEndDevice) {
          // 中程度の最適化
          this.baseScrollSpeed = 40;
        }
      }
      
      enableGPUOptimizations() {
        // 重要な要素にGPU最適化を適用
        const criticalElements = [
          '.tiny-character',
          '.stick-figure',
          '.cards-track',
          '.path-area'
        ];
        
        criticalElements.forEach(selector => {
          const elements = document.querySelectorAll(selector);
          elements.forEach(el => {
            el.style.transform = el.style.transform || 'translateZ(0)';
            el.style.willChange = 'transform';
            el.style.backfaceVisibility = 'hidden';
          });
        });
      }
      
      startRAFLoop() {
        const loop = (currentTime) => {
          if (currentTime - this.lastTime >= 16) { // 60FPS制限
            this.updateAnimations();
            this.lastTime = currentTime;
          }
          this.rafId = requestAnimationFrame(loop);
        };
        this.rafId = requestAnimationFrame(loop);
      }
      
      updateAnimations() {
        // 必要に応じてアニメーション更新
        if (this.isScrolling) {
          this.optimizeWalkingAnimation();
        }
      }
      
      debounceCleanup() {
        // 5秒ごとにメモリクリーンアップ
        setInterval(() => {
          if (!this.isScrolling && !this.isNavigating) {
            this.cleanupUnusedElements();
          }
        }, 5000);
      }
      
      cleanupUnusedElements() {
        // 不要なDOM要素の掃除（メモリ効率化）
        const unusedCards = document.querySelectorAll('.card[data-cleanup="true"]');
        unusedCards.forEach(card => {
          if (card.parentNode) {
            card.parentNode.removeChild(card);
          }
        });
      }
      
      createCards() {
        const track = document.getElementById('cardsTrack');
        if (!track) {
          console.error('Cards track not found!');
          return;
        }
        
        const cardsHTML = [];
        
        // 2セット作成（無限スクロール用）
        for (let set = 0; set < 2; set++) {
          cardsData.forEach(data => {
            cardsHTML.push(`
              <div class="card" data-section="${data.section}" data-link="${data.link}">
                <div class="card-icon">${data.icon}</div>
                <h3 class="card-title">${data.title}</h3>
                <p class="card-description">${data.description}</p>
              </div>
            `);
          });
        }
        
        track.innerHTML = cardsHTML.join('');
        
        // カードが確実に表示されるように
        track.style.visibility = 'visible';
        track.style.opacity = '1';
        track.style.display = 'flex';
        
        // カードクリックイベント
        track.querySelectorAll('.card').forEach(card => {
          card.addEventListener('click', () => {
            const link = card.dataset.link;
            if (link && link !== '#') {
              window.location.href = link;
            }
          });
          
          // ホバー時の反応
          card.addEventListener('mouseenter', () => {
            this.onCardHover(card);
          });
          
          card.addEventListener('mouseleave', () => {
            this.onCardLeave(card);
          });
        });
      }
      
      setupEventListeners() {
        // スクロールイベント - 最適化されたハンドリング
        let scrollTimeout;
        window.addEventListener('wheel', (e) => {
          clearTimeout(scrollTimeout);
          this.handleScroll(e.deltaY);
          
          // スクロール終了を検知してパフォーマンス最適化
          scrollTimeout = setTimeout(() => {
            this.optimizeAfterScroll();
          }, 150);
        }, { passive: true });
        
        // ナビゲーション削除により不要
        
        // タッチイベント（モバイル） - 改善版
        let touchStartY = 0;
        let touchStartX = 0;
        let touchTimeout;
        let isVerticalScroll = false;
        
        document.addEventListener('touchstart', (e) => {
          touchStartY = e.touches[0].clientY;
          touchStartX = e.touches[0].clientX;
          isVerticalScroll = false;
        }, { passive: true });
        
        document.addEventListener('touchmove', (e) => {
          const touchY = e.touches[0].clientY;
          const touchX = e.touches[0].clientX;
          const deltaY = touchStartY - touchY;
          const deltaX = touchStartX - touchX;
          
          // 水平スクロールを検出（カード移動用）- より自然な感度
          if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 5) {
            isVerticalScroll = false;
            clearTimeout(touchTimeout);
            this.handleScroll(deltaX * 0.8); // より自然な感度
            
            touchTimeout = setTimeout(() => {
              this.optimizeAfterScroll();
            }, 150);
            
            // タッチ位置を更新（連続的なスクロールのため）
            touchStartX = touchX;
          }
          // 垂直スクロールも対応
          else if (Math.abs(deltaY) > 5 && Math.abs(deltaY) > Math.abs(deltaX)) {
            isVerticalScroll = true;
            clearTimeout(touchTimeout);
            this.handleScroll(deltaY * 0.6); // モバイル用に感度調整
            
            touchTimeout = setTimeout(() => {
              this.optimizeAfterScroll();
            }, 150);
            
            // タッチ位置を更新
            touchStartY = touchY;
          }
        }, { passive: true });
        
        // キーボードナビゲーション
        document.addEventListener('keydown', (e) => {
          if (e.key === 'ArrowLeft') this.navigateToSection(this.sections[Math.max(0, this.sectionIndex - 1)]);
          if (e.key === 'ArrowRight') this.navigateToSection(this.sections[Math.min(this.sections.length - 1, this.sectionIndex + 1)]);
        });
      }
      
      optimizeAfterScroll() {
        // スクロール終了後の最適化処理
        this.speedMultiplier = 1.0;
        this.updateWalkingSpeed();
      }
      
      handleScroll(deltaY) {
        // スクロール方向と自然な感度設定
        const scrollDirection = deltaY > 0 ? 1 : -1;
        const baseSensitivity = this.isLowEndDevice ? 0.5 : 0.8;
        const scrollAmount = Math.abs(deltaY) * baseSensitivity;
        
        // スクロール速度を保存（アニメーション速度調整用）
        this.scrollVelocity = Math.min(50, Math.abs(deltaY));
        
        // より自然な慣性スクロール
        const inertia = this.scrollInertia || 0;
        const dampening = 0.92;
        this.scrollInertia = inertia * dampening + scrollAmount * 0.08;
        
        // 滑らかなスクロール計算（慣性込み）
        const actualScroll = scrollAmount + this.scrollInertia;
        this.currentScrollOffset = (this.currentScrollOffset || 0) + (scrollDirection * actualScroll);
        
        // 歩行速度クラスを更新
        this.updateWalkingSpeedClass();
        
        // 無限スクロールの滑らかなループ処理
        const cardWidth = 340; // カード幅(320px) + gap(20px)
        const totalWidth = cardWidth * cardsData.length;
        const halfWidth = totalWidth / 2;
        
        // シームレスなループ処理
        if (this.currentScrollOffset > 0) {
          this.currentScrollOffset -= totalWidth;
        } else if (this.currentScrollOffset < -totalWidth) {
          this.currentScrollOffset += totalWidth;
        }
        
        // 高頻度でスムーズ更新
        this.updateCardPositionUltraSmooth();
        
        // 棒人間の歩行開始と向き変更
        if (!this.isScrolling) {
          this.startRunning();
        } else {
          // 既に歩行中の場合は速度を更新
          this.updateWalkingSpeedClass();
        }
        
        // 棒人間の向きを変更
        const character = document.querySelector('.tiny-character');
        if (character) {
          if (scrollDirection > 0) {
            character.classList.add('facing-right');
            character.classList.remove('facing-left');
          } else {
            character.classList.add('facing-left');
            character.classList.remove('facing-right');
          }
        }
        
        // スクロール終了の検知を改善
        clearTimeout(this.scrollTimer);
        this.scrollTimer = setTimeout(() => {
          this.stopRunning();
          this.scrollInertia = 0;
        }, 200);
        
        
        // セクション変更（スクロール量に基づく）
        this.scrollDistance = (this.scrollDistance || 0) + Math.abs(actualScroll);
        if (this.scrollDistance > 2000) {
          if (deltaY > 0) {
            this.nextSection();
          } else {
            this.prevSection();
          }
          this.scrollDistance = 0;
        }
      }
      
      updateCardPositionUltraSmooth() {
        // 前回のRAFをキャンセル
        if (this.cardPositionRAF) {
          cancelAnimationFrame(this.cardPositionRAF);
        }
        
        // 60FPS で滑らかに更新
        this.cardPositionRAF = requestAnimationFrame(() => {
          const track = document.getElementById('cardsTrack');
          if (track && track.children.length > 0) {
            // スクロール中は完全に滑らか
            track.classList.add('scrolling');
            track.classList.remove('idle');
            
            // より滑らかな変換
            const smoothOffset = this.currentScrollOffset || 0;
            track.style.transform = `translateX(${smoothOffset}px) translateZ(0)`;
            track.style.visibility = 'visible';
            track.style.opacity = '1';
            
          }
        });
      }
      
      updateCardPositionSmooth() {
        if (this.cardPositionRAF) {
          cancelAnimationFrame(this.cardPositionRAF);
        }
        
        this.cardPositionRAF = requestAnimationFrame(() => {
          const track = document.getElementById('cardsTrack');
          if (track) {
            // スクロール中はクラスを切り替えて滑らかに
            track.classList.add('scrolling');
            track.classList.remove('idle');
            track.style.setProperty('--scroll-offset', `${this.currentScrollOffset}px`);
          }
        });
      }
      
      updateCardPosition() {
        const track = document.getElementById('cardsTrack');
        if (track) {
          track.style.transform = `translateX(${this.currentScrollOffset}px) translateZ(0)`;
        }
      }
      
      
      updateCardSpeed() {
        const track = document.getElementById('cardsTrack');
        track.style.setProperty('--scroll-speed', `${this.currentScrollSpeed}s`);
      }
      
      updateWalkingSpeedClass() {
        const character = document.querySelector('.tiny-character');
        if (!character || !this.isScrolling) return;
        
        // 速度クラスをリセット
        character.classList.remove('walking-slow', 'walking-normal', 'walking-fast', 'walking-very-fast');
        
        // スクロール速度に基づいて歩行速度クラスを設定
        const velocity = this.scrollVelocity || 1;
        if (velocity < 8) {
          character.classList.add('walking-slow');
        } else if (velocity < 20) {
          character.classList.add('walking-normal');
        } else if (velocity < 35) {
          character.classList.add('walking-fast');
        } else {
          character.classList.add('walking-very-fast');
        }
      }
      
      resetToNormalSpeed() {
        this.speedMultiplier = 1.0;
        this.walkSpeed = 0.8;
        this.currentScrollSpeed = this.baseScrollSpeed;
        this.updateCardSpeed();
        this.updateWalkingSpeed();
      }
      
      optimizeWalkingAnimation() {
        // 歩行アニメーションの最適化
        const character = document.querySelector('.tiny-character');
        const container = document.querySelector('.cards-container');
        
        if (this.speedMultiplier > 2.0 && character) {
          // 高速時は簡略化されたアニメーション
          character.classList.add('fast-walking');
          container.classList.add('fast-3d-mode');
        } else if (character) {
          character.classList.remove('fast-walking');
          container.classList.remove('fast-3d-mode');
        }
      }
      
      startRunning() {
        this.isScrolling = true;
        const container = document.querySelector('.tiny-character');
        
        // 歩行開始
        container.classList.add('walking');
        
        // GIFアニメーション風のフレーム切り替え開始
        this.startWalkingAnimation();
        
      }
      
      startWalkingAnimation() {
        const frames = ['frame1', 'frame2', 'frame3', 'frame4'];
        let currentFrame = 0;
        
        // 既存のアニメーションを安全にクリア
        this.clearWalkingAnimation();
        
        // アイドルフレームを非表示
        const idleFrame = document.querySelector('.walk-frame.idle');
        if (idleFrame) {
          idleFrame.classList.remove('active');
        }
        
        // スクロール速度に基づいてフレーム速度を調整（より動的に）
        const baseFrameDuration = 180; // 少し長めに設定
        const velocity = Math.max(1, this.scrollVelocity || 1);
        const speedFactor = Math.min(3, Math.max(0.4, velocity / 12));
        const frameDuration = Math.max(80, baseFrameDuration / speedFactor); // 最小80ms
        
        // 最初のフレームを表示
        const firstFrame = document.querySelector('.walk-frame.frame1');
        if (firstFrame) {
          firstFrame.classList.add('active');
        }
        
        // 目標を見据えた歩行リズム
        this.walkingInterval = setInterval(() => {
          if (!this.isScrolling) {
            this.clearWalkingAnimation();
            return;
          }
          
          // 効率的なフレーム切り替え
          this.switchToFrame(frames[currentFrame], frames[(currentFrame + 1) % frames.length]);
          currentFrame = (currentFrame + 1) % frames.length;
        }, frameDuration);
      }
      
      switchToFrame(currentFrameClass, nextFrameClass) {
        // 現在のフレームを非表示
        const currentFrame = document.querySelector(`.walk-frame.${currentFrameClass}`);
        if (currentFrame) {
          currentFrame.classList.remove('active');
        }
        
        // 次のフレームを表示
        const nextFrame = document.querySelector(`.walk-frame.${nextFrameClass}`);
        if (nextFrame) {
          nextFrame.classList.add('active');
        }
      }
      
      clearWalkingAnimation() {
        if (this.walkingInterval) {
          clearInterval(this.walkingInterval);
          this.walkingInterval = null;
        }
        
        // 全歩行フレームを非表示
        document.querySelectorAll('.walk-frame:not(.idle)').forEach(frame => {
          frame.classList.remove('active');
        });
      }
      
      stopRunning() {
        this.isScrolling = false;
        const container = document.querySelector('.tiny-character');
        const track = document.getElementById('cardsTrack');
        
        // 歩行停止
        container.classList.remove('walking', 'fast-walking');
        
        // 歩行アニメーションを安全に停止
        this.clearWalkingAnimation();
        
        // アイドルフレームを表示
        const idleFrame = document.querySelector('.walk-frame.idle');
        if (idleFrame) {
          idleFrame.classList.add('active');
        }
        
        // カードトラックをアイドル状態に
        if (track) {
          track.classList.remove('scrolling');
          track.classList.add('idle');
        }
        
        // 停止時に指差しアニメーションを開始
        setTimeout(() => {
          if (!this.isScrolling) {
            this.startPointingAnimation();
          }
        }, 500);
      }
      
      startPointingAnimation() {
        const character = document.querySelector('.tiny-character');
        if (!character || this.isScrolling) return;
        
        // 現在表示中のカードを取得
        const viewportCenter = window.innerWidth / 2;
        const cards = document.querySelectorAll('.card');
        let closestCard = null;
        let minDistance = Infinity;
        
        cards.forEach(card => {
          const rect = card.getBoundingClientRect();
          const cardCenter = rect.left + rect.width / 2;
          const distance = Math.abs(cardCenter - viewportCenter);
          
          if (distance < minDistance && rect.left > 0 && rect.right < window.innerWidth) {
            minDistance = distance;
            closestCard = card;
          }
        });
        
        if (closestCard) {
          // 指差しフレームを作成
          this.showPointingFrame(closestCard);
          
          // 視線エフェクト
          this.createGazeEffect(closestCard);
        }
      }
      
      showPointingFrame(targetCard) {
        // アイドルフレームを非表示
        document.querySelector('.walk-frame.idle').classList.remove('active');
        
        // 指差しフレームを作成または更新
        let pointingFrame = document.querySelector('.walk-frame.pointing');
        if (!pointingFrame) {
          pointingFrame = this.createPointingFrame();
          const container = document.querySelector('.walking-animation-container');
          if (container) {
            container.appendChild(pointingFrame);
          }
        }
        
        pointingFrame.classList.add('active');
        
        // カードのハイライト
        targetCard.classList.add('highlighted');
        
        // 一定時間後にアイドルに戻る
        setTimeout(() => {
          if (!this.isScrolling && pointingFrame) {
            pointingFrame.classList.remove('active');
            const idleFrame = document.querySelector('.walk-frame.idle');
            if (idleFrame) {
              idleFrame.classList.add('active');
            }
            if (targetCard) {
              targetCard.classList.remove('highlighted');
            }
          }
        }, 2500);
      }
      
      createPointingFrame() {
        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        svg.setAttribute('class', 'walk-frame pointing');
        svg.setAttribute('viewBox', '0 0 100 150');
        
        svg.innerHTML = `
          <g stroke="#333" stroke-width="6" stroke-linecap="round" fill="none">
            <!-- 頭（カードを見上げる） -->
            <circle cx="50" cy="15" r="12" fill="#333" stroke="none"/>
            <!-- 胴体（少し後傾） -->
            <line x1="50" y1="27" x2="48" y2="62"/>
            <!-- 左腕（指差し） -->
            <line x1="48" y1="35" x2="30" y2="25"/>
            <line x1="30" y1="25" x2="20" y2="20"/>
            <!-- 人差し指 -->
            <line x1="20" y1="20" x2="15" y2="18" stroke-width="4"/>
            <!-- 右腕（自然に下ろす） -->
            <line x1="48" y1="35" x2="55" y2="50"/>
            <line x1="55" y1="50" x2="58" y2="68"/>
            <!-- 左脚 -->
            <line x1="48" y1="62" x2="45" y2="85"/>
            <line x1="45" y1="85" x2="44" y2="110"/>
            <!-- 右脚 -->
            <line x1="48" y1="62" x2="51" y2="85"/>
            <line x1="51" y1="85" x2="52" y2="110"/>
          </g>
        `;
        
        return svg;
      }
      
      createGazeEffect(targetCard) {
        const effect = document.createElement('div');
        effect.className = 'gaze-effect';
        
        const rect = targetCard.getBoundingClientRect();
        const characterPos = document.querySelector('.tiny-character').getBoundingClientRect();
        
        // 視線の角度を計算
        const angle = Math.atan2(
          rect.top + rect.height / 2 - characterPos.top,
          rect.left + rect.width / 2 - characterPos.left
        ) * 180 / Math.PI;
        
        effect.style.cssText = `
          position: fixed;
          left: ${characterPos.left + characterPos.width / 2}px;
          top: ${characterPos.top + 20}px;
          width: 2px;
          height: ${Math.sqrt(
            Math.pow(rect.left + rect.width / 2 - characterPos.left - characterPos.width / 2, 2) +
            Math.pow(rect.top + rect.height / 2 - characterPos.top - 20, 2)
          )}px;
          background: linear-gradient(to bottom, rgba(255, 179, 0, 0.8), transparent);
          transform-origin: top;
          transform: rotate(${angle + 90}deg);
          pointer-events: none;
          animation: gazeFlash 0.5s ease-out;
        `;
        
        document.body.appendChild(effect);
        
        setTimeout(() => {
          effect.remove();
        }, 500);
      }
      
      
      navigateToSection(sectionName) {
        if (this.currentSection === sectionName) return;
        
        this.isNavigating = true;
        
        // 高速歩行でセクションに移動
        this.speedMultiplier = 3.0;
        this.walkSpeed = 0.25;
        this.currentScrollSpeed = 15;
        
        this.updateCardPosition();
        
        // セクション切り替え
        setTimeout(() => {
          this.changeSection(sectionName);
          
          // 通常状態に戻す
          setTimeout(() => {
            this.isNavigating = false;
          }, 800);
        }, 400);
      }
      
      changeSection(sectionName) {
        if (this.currentSection === sectionName) return;
        
        this.currentSection = sectionName;
        document.body.className = `section-${sectionName}`;
        
        // ナビゲーション更新
        document.querySelectorAll('.nav-item').forEach(nav => {
          nav.classList.toggle('active', nav.dataset.section === sectionName);
        });
        
        this.sectionIndex = this.sections.indexOf(sectionName);
        
        // セクション特有のカードを強調表示
        this.highlightSectionCards(sectionName);
      }
      
      highlightSectionCards(sectionName) {
        const allCards = document.querySelectorAll('.card');
        allCards.forEach(card => {
          if (card.dataset.section === sectionName) {
            card.style.transform = 'scale(1.05)';
            card.style.borderColor = '#4CAF50';
            setTimeout(() => {
              card.style.transform = '';
              card.style.borderColor = '';
            }, 1000);
          }
        });
      }
      
      nextSection() {
        this.sectionIndex = (this.sectionIndex + 1) % this.sections.length;
        this.changeSection(this.sections[this.sectionIndex]);
      }
      
      prevSection() {
        this.sectionIndex = (this.sectionIndex - 1 + this.sections.length) % this.sections.length;
        this.changeSection(this.sections[this.sectionIndex]);
      }
      
      startAutoScroll() {
        // カードの初期位置を設定
        this.currentScrollOffset = 0;
        this.scrollInertia = 0;
        
        // 初期状態をアイドルに設定し、カードを表示
        const track = document.getElementById('cardsTrack');
        if (track) {
          track.classList.add('idle');
          track.classList.remove('scrolling');
          track.style.transform = 'translateX(0px) translateZ(0)';
          track.style.visibility = 'visible';
          track.style.opacity = '1';
          
          // カードが確実に表示されるように強制的に再描画
          track.offsetHeight;
        }
      }
      
      onCardHover(card) {
        const character = document.querySelector('.tiny-character');
        if (!character || this.isScrolling) return;
        
        // 棒人間がカードを見る
        const rect = card.getBoundingClientRect();
        const characterRect = character.getBoundingClientRect();
        
        // カードが画面内にある場合のみ反応
        if (rect.left > 0 && rect.right < window.innerWidth) {
          // 頭だけ傾けるアニメーション
          const lookDirection = rect.left < characterRect.left ? 'left' : 'right';
          character.classList.add(`looking-${lookDirection}`);
          
          // 小さなジャンプ
          character.style.transform = 'translateX(-50%) translateY(-5px) translateZ(0)';
        }
      }
      
      onCardLeave(card) {
        const character = document.querySelector('.tiny-character');
        if (!character) return;
        
        // 通常の状態に戻る
        character.classList.remove('looking-left', 'looking-right');
        character.style.transform = 'translateX(-50%) translateZ(0)';
      }
    }
    
    // 初期化
    document.addEventListener('DOMContentLoaded', () => {
      new MinimalSite();
    });
  </script>
</body>
</html>