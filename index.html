<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>ToMoreBeyond - 面白いことだけをする。友と共に道なき道を越える</title>
  <meta name="description" content="ToMoreBeyondは面白いことだけをするというミッションのもと、AIモバイルアプリ開発、位置情報最適化技術で新しい価値を創造するテクノロジーカンパニーです。">
  
  <!-- SEO Meta Tags -->
  <meta name="keywords" content="ToMoreBeyond,テクノロジー,AI,モバイルアプリ,位置情報,最適化,スタートアップ,イノベーション,Flutter,東京">
  <meta name="author" content="ToMoreBeyond Inc.">
  <meta name="robots" content="index, follow">
  <meta name="language" content="ja">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tomorebeyond.com/">
  <meta property="og:title" content="ToMoreBeyond - 面白いことだけをする。友と共に道なき道を越える">
  <meta property="og:description" content="AIモバイルアプリ開発、位置情報最適化技術で新しい価値を創造するテクノロジーカンパニー">
  <meta property="og:image" content="https://tomorebeyond.com/og-image.jpg">
  <meta property="og:site_name" content="ToMoreBeyond">
  <meta property="og:locale" content="ja_JP">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://tomorebeyond.com/">
  <meta property="twitter:title" content="ToMoreBeyond - 面白いことだけをする">
  <meta property="twitter:description" content="AIモバイルアプリ開発、位置情報最適化技術で新しい価値を創造">
  <meta property="twitter:image" content="https://tomorebeyond.com/twitter-image.jpg">
  <meta property="twitter:site" content="@ToMoreBeyond">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://tomorebeyond.com/">
  
  <!-- Favicon and Apple Touch Icons -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  
  <!-- Theme Color -->
  <meta name="theme-color" content="#ffffff">
  <meta name="msapplication-TileColor" content="#ffffff">
  
  <!-- Preconnect for performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;700;800;900&display=swap" rel="stylesheet">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "TechCompany",
    "name": "ToMoreBeyond",
    "alternateName": "ToMoreBeyond Inc.",
    "description": "面白いことだけをする。友と共に道なき道を越えるというミッションのもと、AIモバイルアプリ開発、位置情報最適化技術で新しい価値を創造するテクノロジーカンパニー",
    "url": "https://tomorebeyond.com",
    "logo": "https://tomorebeyond.com/logo.png",
    "sameAs": [
      "https://twitter.com/ToMoreBeyond",
      "https://instagram.com/tomorebeyond_official",
      "https://youtube.com/@ToMoreBeyond",
      "https://linkedin.com/company/tomorebeyond",
      "https://github.com/ToMoreBeyond"
    ],
    "foundingDate": "2025-04-01",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "東京都渋谷区",
      "addressCountry": "JP"
    },
    "contactPoint": {
      "@type": "ContactPoint",
      "contactType": "Customer Service",
      "email": "contact@tomorebeyond.com",
      "availableLanguage": "Japanese"
    },
    "founder": {
      "@type": "Person",
      "name": "山田純大",
      "jobTitle": "CEO"
    }
  }
  </script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Courier New', monospace; /* 8bitレトロ風フォント */
      background: #ffffff; /* 白背景に変更 */
      overflow-x: hidden;
      overflow-y: auto;
      scroll-behavior: auto; /* 8bitらしくスムーズスクロールなし */
      min-height: 3000vh; /* 十分に長いスクロール距離 */
      position: relative;
      image-rendering: pixelated;
      image-rendering: -moz-crisp-edges;
      image-rendering: crisp-edges;
      /* モバイル最適化 */
      -webkit-overflow-scrolling: touch;
      -webkit-font-smoothing: none;
    }
    
    /* レトロゲーム風ピクセルグリッド背景（白背景用に調整） */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        repeating-linear-gradient(0deg, transparent, transparent 7px, rgba(0,0,0,0.03) 7px, rgba(0,0,0,0.03) 8px),
        repeating-linear-gradient(90deg, transparent, transparent 7px, rgba(0,0,0,0.03) 7px, rgba(0,0,0,0.03) 8px);
      pointer-events: none;
      z-index: 1;
    }
    
    body.loading {
      overflow: hidden;
    }
    
    body.loaded {
      overflow-x: hidden;
      overflow-y: auto;
    }
    
    /* 8bit ドット絵風ロゴ */
    .logo {
      position: fixed;
      top: 16px; /* 8の倍数 */
      left: 16px; /* 8の倍数 */
      z-index: 1000;
      font-family: 'Courier New', monospace;
      font-size: 16px; /* 8の倍数 */
      font-weight: normal;
      color: #000;
      text-decoration: none;
      letter-spacing: 1px;
      transition: none; /* 8bitらしくスムーズ化なし */
      background: none;
      opacity: 0;
      transform: translateY(-8px); /* 8の倍数 */
      text-transform: uppercase;
      image-rendering: pixelated;
    }
    
    body.loaded .logo {
      opacity: 1;
      transform: translateY(0);
    }
    
    .logo:hover {
      transform: none; /* 8bitらしくスケール効果なし */
      color: #fff;
      background: #000;
      padding: 2px 4px; /* シンプルな反転効果 */
    }
    
    /* 動画背景レイヤー（準備用） */
    .video-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      overflow: hidden;
      background: #000;
    }
    
    .video-background video {
      position: absolute;
      top: 50%;
      left: 50%;
      min-width: 100%;
      min-height: 100%;
      width: auto;
      height: auto;
      transform: translate(-50%, -50%);
      opacity: 0.6; /* ゲーム要素が見えるように */
    }
    
    /* ビデオからゲームへの遷移オーバーレイ */
    .transition-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      z-index: 9998;
      opacity: 0;
      pointer-events: none;
      transition: opacity 1s ease;
    }
    
    .transition-overlay.active {
      opacity: 1;
      pointer-events: auto;
    }
    
    /* ロゴポップアップコンテナ */
    .logo-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      z-index: 10000;
      opacity: 0;
      transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    
    .logo-popup.show {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }
    
    .logo-popup.hide {
      transform: translate(-50%, -50%) scale(1.2);
      opacity: 0;
    }
    
    .popup-logo {
      font-family: 'Courier New', monospace;
      font-size: 48px;
      color: #fff;
      text-transform: uppercase;
      letter-spacing: 4px;
      text-shadow: 
        0 0 10px rgba(255,255,255,0.8),
        0 0 20px rgba(255,255,255,0.6),
        0 0 30px rgba(255,255,255,0.4);
      animation: pixelGlow 2s ease-in-out infinite;
    }
    
    @keyframes pixelGlow {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.2); }
    }
    
    /* 初期ローディング画面（動画開始前） */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000; /* 動画に合わせて黒背景 */
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
      image-rendering: pixelated;
    }
    
    .loading-screen.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }
    
    .loading-content {
      text-align: center;
      max-width: 400px; /* 8の倍数 */
      padding: 32px; /* 8の倍数 */
    }
    
    .logo-loading {
      margin-bottom: 32px; /* 8の倍数 */
    }
    
    .company-name {
      font-family: 'Courier New', monospace;
      font-size: 24px; /* 8の倍数 */
      font-weight: normal;
      color: #fff;
      margin: 0 0 16px 0; /* 8の倍数 */
      letter-spacing: 2px;
      background: none;
      text-transform: uppercase;
      animation: pixel8bitBlink 1s infinite; /* 8bit風点滅 */
    }
    
    @keyframes pixel8bitBlink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }
    
    .mission-text {
      font-family: 'Courier New', monospace;
      font-size: 12px; /* 8の倍数 */
      color: #000;
      line-height: 1.5;
      margin: 0;
      opacity: 0;
      animation: pixel8bitFadeIn 0.5s ease 0.5s forwards; /* 8bit風の短いアニメーション */
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    @keyframes pixel8bitFadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
    
    /* 道の描画アニメーション */
    .path-drawing {
      position: relative;
      height: 200px;
      margin: 40px 0;
      opacity: 0;
      animation: fadeIn 1s ease 1s forwards;
    }
    
    @keyframes fadeIn {
      to { opacity: 1; }
    }
    
    .path-svg {
      width: 100%;
      height: 100%;
    }
    
    .drawing-path {
      animation: drawPath 3s ease-in-out 1.5s forwards;
    }
    
    @keyframes drawPath {
      to {
        stroke-dashoffset: 0;
      }
    }
    
    .unknown-path {
      opacity: 0.3;
    }
    
    /* キャラクターの移動 */
    .loading-character {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 40px;
      height: 60px;
      animation: characterWalk 3s ease-in-out 1.5s forwards;
    }
    
    @keyframes characterWalk {
      0% {
        left: 0;
        transform: translateY(-50%) translateX(-20px);
      }
      100% {
        left: calc(100% - 40px);
        transform: translateY(-50%) translateX(0);
      }
    }
    
    .char-svg {
      width: 100%;
      height: 100%;
      animation: characterBob 0.6s ease-in-out infinite;
    }
    
    @keyframes characterBob {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-3px); }
    }
    
    /* プログレスバー */
    .loading-progress {
      margin-top: 40px;
      opacity: 0;
      animation: fadeIn 1s ease 2s forwards;
    }
    
    .progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(255, 179, 0, 0.2);
      border-radius: 3px;
      overflow: hidden;
      margin-bottom: 20px;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #FFB300, #DAA520);
      border-radius: 3px;
      width: 0;
      transition: width 0.3s ease;
      box-shadow: 0 0 10px rgba(255, 179, 0, 0.5);
    }
    
    .loading-text {
      font-size: 1rem;
      color: #666;
      margin: 0;
      transition: all 0.3s ease;
    }
    
    /* ナビゲーションバーを削除（不要） */
    
    /* メインコンテンツ - 左右スクロール対応 */
    .main-content {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 50px;
      overflow-x: hidden; /* 横スクロールバーを非表示 */
      overflow-y: hidden; /* 縦スクロールバーを非表示 */
      position: relative;
      z-index: 5; /* 動画より前面 */
    }
    
    /* 8bit ドット絵風カードコンテナ */
    .cards-container {
      width: 100%;
      max-width: 1200px;
      height: 400px;
      position: relative;
      overflow: hidden;
      background: transparent;
      display: flex;
      align-items: center;
      image-rendering: pixelated;
      image-rendering: -moz-crisp-edges;
      image-rendering: crisp-edges;
    }
    
    .cards-track {
      display: flex;
      gap: 16px; /* 8の倍数 */
      height: 100%;
      will-change: transform;
      backface-visibility: hidden;
      contain: layout style paint;
      transform-style: preserve-3d;
      transform: translateX(0px) translateZ(0);
      visibility: visible;
      opacity: 1;
      image-rendering: pixelated;
    }
    
    /* 8bitらしくスムーズアニメーションを削除 */
    .cards-track {
      transition: none;
      transform-origin: center center;
      will-change: transform;
    }
    
    /* シンプルな8bit風表示エフェクト */
    .card {
      transition: none; /* 8bitらしくスムーズ化なし */
      transform-origin: center center;
      will-change: transform, opacity;
    }
    
    /* カードの距離に基づく8bit風表示状態 */
    .card.distant {
      opacity: 0.5;
      transform: scale(0.8);
      filter: none;
    }
    
    .card.nearby {
      opacity: 0.8;
      transform: scale(0.9);
      filter: none;
    }
    
    .card.current {
      opacity: 1;
      transform: scale(1);
      filter: none;
      box-shadow: none;
      border-color: #000;
    }
    
    /* 8bit ドット絵風カードデザイン + Liquid Glass エフェクト */
    .card {
      min-width: 256px; /* 8の倍数 */
      height: 320px; /* 8の倍数 */
      background: 
        linear-gradient(135deg, 
          rgba(255, 255, 255, 0.1) 0%,
          rgba(255, 255, 255, 0.05) 50%,
          rgba(0, 0, 0, 0.1) 100%),
        #2a2a2a; /* ベースのダークグレー背景 */
      border: 4px solid rgba(255, 255, 255, 0.3); /* 半透明の白枠 */
      border-radius: 16px; /* 現代的な角丸とピクセル風の融合 */
      padding: 24px 16px; /* 8の倍数 */
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Liquid Glass効果のための滑らかなトランジション */
      position: relative;
      box-shadow: 
        8px 8px 0 rgba(0, 0, 0, 0.3), /* レトロな影効果 */
        -2px -2px 0 rgba(68, 68, 68, 0.5) inset, /* 立体感 */
        0 8px 32px rgba(0, 0, 0, 0.12), /* 現代的なドロップシャドウ */
        inset 0 1px 0 rgba(255, 255, 255, 0.2); /* 内側のハイライト */
      overflow: hidden;
      font-family: 'Courier New', monospace;
      image-rendering: pixelated;
      image-rendering: -moz-crisp-edges;
      image-rendering: crisp-edges;
      z-index: 10; /* 背景動画より前面 */
      backdrop-filter: blur(20px); /* Liquid Glass効果の核心 */
      -webkit-backdrop-filter: blur(20px);
    }
    
    /* Liquid Glass エフェクト用オーバーレイ */
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.15) 0%,
        transparent 25%,
        transparent 75%,
        rgba(255, 255, 255, 0.08) 100%
      );
      border-radius: inherit;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    /* ホバー時のLiquid Glass動的効果 */
    .card:hover::before {
      opacity: 1;
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.25) 0%,
        rgba(255, 255, 255, 0.1) 25%,
        rgba(255, 255, 255, 0.05) 75%,
        rgba(255, 255, 255, 0.15) 100%
      );
    }
    
    /* ホバー時の追加効果 */
    .card:hover {
      transform: translateY(-8px) scale(1.02);
      border-color: rgba(255, 255, 255, 0.5);
      box-shadow: 
        12px 12px 0 rgba(0, 0, 0, 0.2),
        -3px -3px 0 rgba(68, 68, 68, 0.4) inset,
        0 16px 48px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
    }
    
    /* カードコンテンツの微調整 */
    .card > * {
      position: relative;
      z-index: 2;
    }
    
    /* 8bit風セクション区切りカード */
    .card.divider {
      min-width: 224px; /* 8の倍数 */
      height: 256px; /* 8の倍数 */
      background: #000;
      border: 2px solid #000;
      color: #fff;
      font-weight: normal;
      box-shadow: none;
      cursor: default;
      position: relative;
      font-family: 'Courier New', monospace;
    }
    
    .card.divider::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(135deg, #FFB300, #FFA000, #FFB300);
      border-radius: 22px;
      z-index: -1;
      animation: dividerGlow 3s ease-in-out infinite;
    }
    
    @keyframes dividerGlow {
      0%, 100% { 
        opacity: 0.8;
        transform: scale(1);
      }
      50% { 
        opacity: 1;
        transform: scale(1.02);
      }
    }
    
    /* 8bit風セクション区切りカードの内容 */
    .card.divider .card-icon {
      font-family: 'Courier New', monospace;
      font-size: 32px; /* 8の倍数 */
      margin-bottom: 16px; /* 8の倍数 */
      text-shadow: none;
      animation: none; /* 8bitらしくアニメーションなし */
      line-height: 1;
    }
    
    .card.divider .card-title {
      font-family: 'Courier New', monospace;
      font-size: 16px; /* 8の倍数 */
      font-weight: normal;
      color: #fff;
      text-shadow: none;
      margin-bottom: 8px; /* 8の倍数 */
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .card.divider .card-description {
      font-family: 'Courier New', monospace;
      color: #fff;
      font-size: 8px; /* 8の倍数 */
      font-weight: normal;
      text-shadow: none;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    /* 8bit風ホバー効果 */
    .card.divider:hover {
      transform: none; /* 8bitらしくスムーズ化なし */
      box-shadow: none;
      filter: invert(1); /* 8bit風の反転エフェクト */
    }
    
    .card:hover {
      transform: none; /* 8bitらしくスムーズ化なし */
      box-shadow: none;
      background: #000; /* 8bit風の反転 */
      color: #fff;
      border-color: #000;
    }
    
    .card:hover .card-title,
    .card:hover .card-description,
    .card:hover .card-icon {
      color: #fff;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #FFB300, #FFA000);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.4s ease;
    }
    
    .card:hover::before {
      transform: scaleX(1);
    }
    
    .card::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(circle at center, 
        rgba(255,179,0,0.03) 0%, 
        transparent 70%);
      opacity: 0;
      transition: opacity 0.4s ease;
      border-radius: 20px;
    }
    
    .card:hover::after {
      opacity: 1;
    }
    
    /* 8bit風カードの内容 */
    .card-icon {
      font-family: 'Courier New', monospace;
      font-size: 32px; /* より大きく */
      margin-bottom: 16px; /* 8の倍数 */
      filter: none;
      transition: none; /* 8bitらしくスムーズ化なし */
      line-height: 1;
      color: #0ff; /* シアン色でレトロ感 */
      text-shadow: 2px 2px 0 #000; /* ピクセル影 */
    }
    
    .card:hover .card-icon {
      transform: none; /* 8bitらしくホバー効果なし */
    }
    
    .card-title {
      font-family: 'Courier New', monospace;
      font-size: 16px; /* より読みやすく */
      font-weight: normal;
      color: #fff; /* 白文字 */
      margin-bottom: 8px; /* 8の倍数 */
      letter-spacing: 1px;
      text-transform: uppercase;
      line-height: 1.2;
      text-shadow: 2px 2px 0 #000; /* ピクセル影 */
    }
    
    .card-description {
      font-family: 'Courier New', monospace;
      font-size: 10px; /* 少し大きく */
      color: #aaa; /* グレー文字 */
      line-height: 1.5;
      font-weight: normal;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    /* アクセシビリティ向上 */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
    
    /* 8bit ドット絵風看板システム */
    .signpost-container {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 80px;
      z-index: 100;
      background: transparent;
      pointer-events: none;
      image-rendering: pixelated;
      image-rendering: -moz-crisp-edges;
      image-rendering: crisp-edges;
      opacity: 0; /* 初期非表示 */
      transition: opacity 1s ease;
    }
    
    .signpost {
      position: absolute;
      bottom: 10px;
      width: 48px; /* 12x4 = 48px */
      height: 48px; /* 12x4 = 48px */
      transform-origin: bottom center;
      transition: none; /* 8bitらしくスムーズ化なし */
      pointer-events: auto;
      image-rendering: pixelated;
    }
    
    .signpost:hover {
      /* 8bit風のシンプルな効果 */
      filter: invert(1);
    }
    
    /* ドット絵風ポール */
    .signpost-pole {
      position: absolute;
      bottom: 0;
      left: 50%;
      width: 2px;
      height: 24px;
      background: #000;
      transform: translateX(-50%);
      image-rendering: pixelated;
    }
    
    /* ドット絵風看板 */
    .signpost-board {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #2a2a2a;
      border: 2px solid #fff;
      border-radius: 0; /* 角ばったドット絵風 */
      padding: 4px 8px;
      font-family: 'Courier New', monospace;
      font-size: 8px;
      font-weight: normal;
      color: #fff;
      white-space: nowrap;
      min-width: 40px;
      text-align: center;
      image-rendering: pixelated;
      line-height: 1;
      box-shadow: 2px 2px 0 #000;
    }
    
    .signpost.active .signpost-board {
      background: #0ff;
      color: #000;
      border-color: #0ff;
      box-shadow: 0 0 8px #0ff, 2px 2px 0 #000;
    }
    
    /* 8bit風アイコン（テキストベース） */
    .signpost-icon {
      font-family: 'Courier New', monospace;
      font-size: 6px;
      margin-bottom: 1px;
      display: block;
      line-height: 1;
    }
    
    .signpost-label {
      font-family: 'Courier New', monospace;
      font-size: 4px;
      line-height: 1;
      display: block;
      text-transform: uppercase;
    }
    
    
    
    
    /* 8bit ドット絵風棒人間（16x16ピクセル感） */
    .tiny-character {
      position: fixed;
      bottom: max(40px, calc(env(safe-area-inset-bottom) + 30px)); /* より下に配置 */
      left: 20px;
      transform: translateZ(0);
      width: 80px; /* 16x5 = 80px - さらに大きく */
      height: 80px; /* 16x5 = 80px */
      z-index: 150;
      image-rendering: pixelated;
      image-rendering: -moz-crisp-edges;
      image-rendering: crisp-edges;
      contain: layout style paint;
      will-change: transform, left;
      backface-visibility: hidden;
      transition: left 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 1s ease;
      opacity: 0; /* 初期非表示 */
    }
    
    /* ピクセルキャラクター用グリッド */
    .pixel-character {
      position: relative;
      width: 100%;
      height: 100%;
    }
    
    .pixel-grid {
      position: relative;
      width: 100%;
      height: 100%;
      transform: scale(5); /* 16px → 80px - さらに大きく */
      transform-origin: top left;
    }
    
    /* 個別ピクセル */
    .pixel {
      position: absolute;
      background: #000;
      image-rendering: pixelated;
      image-rendering: -moz-crisp-edges;
      image-rendering: crisp-edges;
    }
    
    /* 白黒8bitスタイル */
    .pixel-character .pixel {
      background: #000;
      box-shadow: none;
    }
    
    /* ドット絵風の影効果 */
    .tiny-character {
      filter: none;
    }
    
    .tiny-character::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      height: 2px;
      background: #000;
      opacity: 0.3;
      image-rendering: pixelated;
    }
    
    /* キャラクターの旅路進行状態 */
    .tiny-character.journey-mode {
      transition: left 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    
    /* チェックポイント到達時のエフェクト */
    .tiny-character.at-checkpoint {
      filter: drop-shadow(0 8px 16px rgba(255,179,0,0.4));
      animation: checkpointGlow 2s ease-in-out infinite;
    }
    
    @keyframes checkpointGlow {
      0%, 100% { 
        filter: drop-shadow(0 8px 16px rgba(255,179,0,0.4));
      }
      50% { 
        filter: drop-shadow(0 12px 24px rgba(255,179,0,0.6));
      }
    }
    
    /* チェックポイント通知アニメーション */
    @keyframes checkpointPop {
      0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
      }
      20% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.1);
      }
      30% {
        transform: translate(-50%, -50%) scale(1);
      }
      80% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.9);
      }
    }
    
    /* リセット通知アニメーション */
    @keyframes resetPop {
      0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.7);
      }
      15% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.05);
      }
      25% {
        transform: translate(-50%, -50%) scale(1);
      }
      85% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
      }
    }
    
    
    /* GIF風コマ送り歩行アニメーション */
    .walking-animation-container {
      position: relative;
      width: 100%;
      height: 100%;
    }
    
    .walk-frame {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      visibility: hidden;
    }
    
    /* 各フレームの表示タイミング */
    .walk-frame.active {
      opacity: 1;
      visibility: visible;
    }
    
    /* アイドル状態のアニメーション */
    .walk-frame.idle.active {
      animation: idleSwaying 4s ease-in-out infinite;
    }
    
    @keyframes idleSwaying {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      25% { transform: translateY(-1px) rotate(0.5deg); }
      50% { transform: translateY(0px) rotate(0deg); }
      75% { transform: translateY(-1px) rotate(-0.5deg); }
    }
    
    /* 棒人間の視線動作 */
    .tiny-character.looking-left .walk-frame.idle.active circle {
      transform: translateX(-2px);
      transition: transform 0.3s ease;
    }
    
    .tiny-character.looking-right .walk-frame.idle.active circle {
      transform: translateX(2px);
      transition: transform 0.3s ease;
    }
    
    /* キャラクター進化システム */
    .tiny-character.evolution-level-1 {
      filter: drop-shadow(0 4px 8px rgba(255,179,0,0.2));
    }
    
    .tiny-character.evolution-level-2 {
      filter: drop-shadow(0 6px 12px rgba(255,179,0,0.3));
      transform: scale(1.05);
    }
    
    .tiny-character.evolution-level-3 {
      filter: drop-shadow(0 8px 16px rgba(255,179,0,0.4));
      transform: scale(1.1);
    }
    
    .tiny-character.evolution-level-4 {
      filter: drop-shadow(0 10px 20px rgba(255,179,0,0.5));
      transform: scale(1.15);
    }
    
    .tiny-character.evolution-level-5 {
      filter: drop-shadow(0 12px 24px rgba(255,179,0,0.6));
      transform: scale(1.2);
      animation: finalEvolutionGlow 3s ease-in-out infinite;
    }
    
    @keyframes finalEvolutionGlow {
      0%, 100% { 
        filter: drop-shadow(0 12px 24px rgba(255,179,0,0.6));
      }
      50% { 
        filter: drop-shadow(0 16px 32px rgba(255,179,0,0.8));
      }
    }
    
    /* 進化エフェクト */
    .evolution-effect {
      position: absolute;
      inset: -20px;
      border: 2px solid #FFB300;
      border-radius: 50%;
      opacity: 0;
      animation: evolutionPulse 0.8s ease-out;
      pointer-events: none;
    }
    
    @keyframes evolutionPulse {
      0% {
        opacity: 1;
        transform: scale(0.8);
      }
      100% {
        opacity: 0;
        transform: scale(1.5);
      }
    }
    
    /* 指差しフレーム */
    .walk-frame.pointing {
      transition: opacity 0.3s ease;
    }
    
    /* GIF風コマ送り歩行（4フレーム） */
    .walking-animation {
      pointer-events: none;
    }
    
    /* フレーム切り替えのスムーズ化 */
    .walk-frame {
      transition: opacity 0.1s ease-out;
    }
    
    /* 左右の向き対応 - 左右スクロールに合わせて調整 */
    .tiny-character.facing-left .walking-animation-container {
      transform: scaleX(-1); /* 左向き（左スクロール時） */
    }
    
    .tiny-character.facing-right .walking-animation-container {
      transform: scaleX(1); /* 右向き（右スクロール時） */
    }
    
    /* セクション別道の色 */
    .section-apps .path-area { background: #f0f8f0; }
    .section-company .path-area { background: #fff8f0; }
    .section-members .path-area { background: #f8f0f8; }
    .section-media .path-area { background: #f0f8ff; }
    .section-contact .path-area { background: #fff0f0; }
    
    .section-apps .path-line { background: #4CAF50; }
    .section-company .path-line { background: #FFB300; }
    .section-members .path-line { background: #9C27B0; }
    .section-media .path-line { background: #2196F3; }
    .section-contact .path-line { background: #FF5722; }
    
    /* 高速歩行モード - スムーズな走行 */
    .walking.fast-walking .walk-frame.frame1,
    .walking.fast-walking .walk-frame.frame2,
    .walking.fast-walking .walk-frame.frame3 {
      animation-duration: 0.3s !important;
    }
    
    /* カードハイライト効果 */
    .card.highlighted {
      transform: translateY(-15px) scale(1.05) !important;
      box-shadow: 
        0 25px 70px rgba(255,179,0,0.3),
        0 10px 35px rgba(255,179,0,0.2) !important;
      border-color: #FFB300 !important;
      animation: highlightPulse 1.5s ease-in-out infinite;
    }
    
    @keyframes highlightPulse {
      0%, 100% { 
        box-shadow: 
          0 25px 70px rgba(255,179,0,0.3),
          0 10px 35px rgba(255,179,0,0.2);
      }
      50% { 
        box-shadow: 
          0 30px 80px rgba(255,179,0,0.4),
          0 15px 40px rgba(255,179,0,0.3);
      }
    }
    
    /* 視線エフェクト */
    @keyframes gazeFlash {
      0% { 
        opacity: 0;
        transform: rotate(var(--angle, 90deg)) scaleY(0);
      }
      50% {
        opacity: 1;
      }
      100% { 
        opacity: 0;
        transform: rotate(var(--angle, 90deg)) scaleY(1);
      }
    }
    
    /* スクロール時の軽量化 */
    .scrolling .walk-frame {
      contain: strict;
      transform: translateZ(0);
    }
    
    /* 低性能デバイス向け最適化 */
    .low-performance-mode .walking .walk-frame.frame1,
    .low-performance-mode .walking .walk-frame.frame2,
    .low-performance-mode .walking .walk-frame.frame3 {
      animation-duration: 0.8s !important;
      will-change: auto;
    }
    
    .low-performance-mode .tiny-character {
      filter: none;
      contain: layout;
    }
    
    .low-performance-mode .weed {
      display: none;
    }
    
    .low-performance-mode .card {
      transition: transform 0.2s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    
    .low-performance-mode .card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }
    
    .low-performance-mode .cards-track {
      transition: none !important;
    }
    
    /* damso.com風のクリーンなエフェクト */
    .cards-container::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        linear-gradient(to right, 
          rgba(255,255,255,0.9) 0%, 
          transparent 15%, 
          transparent 85%, 
          rgba(255,255,255,0.9) 100%);
      pointer-events: none;
      z-index: 2;
    }
    
    /* パフォーマンス最適化 */
    .card {
      will-change: transform, opacity, filter;
      backface-visibility: hidden;
      transform-origin: center center;
    }
    
    .cards-track {
      will-change: transform;
      backface-visibility: hidden;
      transform-origin: center center;
    }
    
    
    /* モバイルスクロール最適化 */
    @media (max-width: 768px) {
      body {
        min-height: 2500vh; /* モバイルでは少し短く */
        -webkit-overflow-scrolling: touch;
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
      }
      
      .pixel-grid {
        transform: scale(3.5); /* モバイルでも適度に大きく */
        -webkit-transform: scale(3.5);
      }
      
      .tiny-character {
        will-change: transform, left;
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0); /* ハードウェアアクセラレーション */
        width: 70px; /* モバイル用サイズ - さらに大きく */
        height: 70px;
        transition: left 0.6s ease-out; /* モバイルで軽快な動き */
      }
      
      .cards-container {
        width: 100%;
        padding: 0 20px;
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
      }
      
      .cards-track {
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
      }
      
      .card {
        min-width: 280px; /* モバイル用サイズ */
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
      }
      
      /* 背景グリッドをモバイルで軽量化（白背景用） */
      body::before {
        background-image: 
          repeating-linear-gradient(0deg, transparent, transparent 20px, rgba(0,0,0,0.01) 20px, rgba(0,0,0,0.01) 21px),
          repeating-linear-gradient(90deg, transparent, transparent 20px, rgba(0,0,0,0.01) 20px, rgba(0,0,0,0.01) 21px);
      }
    }
    
    /* レスポンシブ - モバイル最適化 */
    @media (max-width: 768px) {
      body {
        overflow: hidden;
        transform: scale(0.75);
        transform-origin: top left;
        width: 133.33%;
        height: 133.33%;
      }
      
      .logo { 
        font-size: 18px; 
        top: 12px; 
        left: 12px;
        z-index: 1001;
      }
      
      .main-content { 
        padding: 0 40px;
        height: 100vh;
        display: flex;
        align-items: center;
      }
      
      /* モバイル用カード調整 - 横スクロール維持 */
      .cards-container {
        height: 320px;
        width: 100%;
        overflow: hidden;
        max-width: 1000px;
      }
      
      .cards-track {
        gap: 16px;
        flex-direction: row;
      }
      
      .card { 
        min-width: 280px; 
        height: 320px; 
        padding: 30px 20px;
        border-radius: 16px;
      }
      
      .card-icon { 
        font-size: 48px;
        margin-bottom: 20px;
      }
      
      .card-title { 
        font-size: 22px;
        margin-bottom: 12px;
      }
      
      .card-description { 
        font-size: 15px;
        line-height: 1.5;
      }
      
      /* モバイル用棒人間調整 */
      .tiny-character { 
        width: 84px; 
        height: 84px;
        bottom: max(60px, calc(env(safe-area-inset-bottom) + 50px)); /* モバイルでもより下に */
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
      }
      
      .walk-frame g {
        stroke-width: 5;
      }
      
      /* モバイル用道調整 */
      .path-area {
        height: 48px;
      }
      
      .path-decoration {
        bottom: 64px;
        height: 16px;
      }
      
      /* カードのホバーエフェクトを無効化 */
      .card:hover {
        transform: none;
        box-shadow: 
          0 2px 8px 0 rgba(0, 0, 0, 0.06);
      }
      
      /* グラデーションエフェクトの調整 */
      .cards-container::after {
        background: 
          linear-gradient(to right, 
            rgba(255,255,255,0.95) 0%, 
            transparent 10%, 
            transparent 90%, 
            rgba(255,255,255,0.95) 100%);
      }
    }
    
    /* 縦画面（ポートレート）モードでの追加縮尺調整 */
    @media (max-width: 768px) and (orientation: portrait) {
      body {
        transform: scale(0.65);
        width: 153.85%;
        height: 153.85%;
      }
      
      .cards-container {
        height: 280px;
        max-width: 900px;
      }
      
      .tiny-character {
        width: 72px;
        height: 72px;
        bottom: max(55px, calc(env(safe-area-inset-bottom) + 45px)); /* より下に配置 */
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
      }
      
      .path-area {
        height: 40px;
      }
    }
    
    
    /* タッチデバイス用最適化 */
    @media (hover: none) and (pointer: coarse) {
      .card:hover {
        transform: none !important;
      }
      
      .card:active {
        transform: 
          translateX(0px) 
          translateZ(30px) 
          rotateY(0deg) 
          scale(1.02) !important;
        transition: all 0.2s ease;
      }
      
      /* タッチ時の雑草反応 */
      .weed {
        animation-duration: 2s;
      }
    }
  </style>
</head>
<body class="section-company loading">
  
  <!-- 動画背景レイヤー（準備用） -->
  <div class="video-background" id="videoBackground" style="display: none;">
    <!-- 動画要素はJavaScriptで制御 -->
    <!-- <video autoplay muted loop playsinline>
      <source src="background-video.mp4" type="video/mp4">
    </video> -->
  </div>
  
  <!-- 遷移オーバーレイ -->
  <div class="transition-overlay" id="transitionOverlay"></div>
  
  <!-- ロゴポップアップ -->
  <div class="logo-popup" id="logoPopup">
    <div class="popup-logo">TOMOREBEYOND</div>
  </div>
  
  <!-- ローディング画面 -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-content">
      <div class="logo-loading">
        <h1 class="company-name">ToMoreBeyond</h1>
        <p class="mission-text">面白いことだけをする。友と共に“道なき道”を越える</p>
      </div>
      
      <div class="path-drawing">
        <svg class="path-svg" viewBox="0 0 800 200">
          <defs>
            <linearGradient id="pathGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:#DAA520;stop-opacity:0" />
              <stop offset="50%" style="stop-color:#FFB300;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#DAA520;stop-opacity:0" />
            </linearGradient>
          </defs>
          
          <!-- 未開拓の道 -->
          <path class="unknown-path" d="M 0 100 Q 200 80 400 100 T 800 100" 
                stroke="#ddd" stroke-width="3" fill="none" stroke-dasharray="10,5" />
          
          <!-- 開拓される道 -->
          <path class="drawing-path" d="M 0 100 Q 200 80 400 100 T 800 100" 
                stroke="url(#pathGradient)" stroke-width="6" fill="none" 
                stroke-dasharray="1600" stroke-dashoffset="1600" />
        </svg>
        
        <!-- 進行中のキャラクター -->
        <div class="loading-character">
          <svg viewBox="0 0 100 150" class="char-svg">
            <g stroke="#FFB300" stroke-width="6" stroke-linecap="round" fill="none">
              <circle cx="50" cy="20" r="12" fill="#FFB300" stroke="none"/>
              <line x1="50" y1="32" x2="50" y2="65"/>
              <line x1="50" y1="40" x2="42" y2="52"/>
              <line x1="42" y1="52" x2="40" y2="68"/>
              <line x1="50" y1="40" x2="58" y2="52"/>
              <line x1="58" y1="52" x2="60" y2="68"/>
              <line x1="50" y1="65" x2="46" y2="87"/>
              <line x1="46" y1="87" x2="45" y2="110"/>
              <line x1="50" y1="65" x2="54" y2="87"/>
              <line x1="54" y1="87" x2="55" y2="110"/>
            </g>
          </svg>
        </div>
      </div>
      
      <div class="loading-progress">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <p class="loading-text" id="loadingText">旅の準備中...</p>
      </div>
    </div>
  </div>
  
  <!-- 左上ロゴ -->
  <a href="#" class="logo">ToMoreBeyond</a>
  
  <!-- ナビゲーションバー削除（シンプル化） -->
  
  <!-- メインコンテンツ -->
  <main class="main-content">
    <div class="cards-container">
      <div class="cards-track" id="cardsTrack">
        <!-- カードはJavaScriptで生成 -->
      </div>
    </div>
  </main>
  
  <!-- 看板システム -->
  <div class="signpost-container" id="signpostContainer"></div>
  
  <!-- 8bit ドット絵風歩行アニメーション棒人間 -->
  <div class="tiny-character">
    <div class="walking-animation-container">
      
      <!-- アイドルフレーム: シンプルな棒人間 -->
      <div class="walk-frame idle pixel-character">
        <div class="pixel-grid">
          <!-- 頭部 (3x3の四角) -->
          <div class="pixel" style="top: 1px; left: 6px; width: 3px; height: 3px;"></div>
          
          <!-- 胴体 (縦線 4ピクセル) -->
          <div class="pixel" style="top: 4px; left: 7px; width: 1px; height: 4px;"></div>
          
          <!-- 左腕 (水平線) -->
          <div class="pixel" style="top: 5px; left: 4px; width: 3px; height: 1px;"></div>
          
          <!-- 右腕 (水平線) -->
          <div class="pixel" style="top: 5px; left: 8px; width: 3px; height: 1px;"></div>
          
          <!-- 左脚 (斜め下) -->
          <div class="pixel" style="top: 8px; left: 6px; width: 1px; height: 3px;"></div>
          
          <!-- 右脚 (斜め下) -->
          <div class="pixel" style="top: 8px; left: 8px; width: 1px; height: 3px;"></div>
        </div>
      </div>
      
      <!-- フレーム1: 歩行ポーズ（左脚前進） -->
      <div class="walk-frame frame1 pixel-character">
        <div class="pixel-grid">
          <!-- 頭部 (3x3の四角) -->
          <div class="pixel" style="top: 1px; left: 6px; width: 3px; height: 3px;"></div>
          
          <!-- 胴体 (縦線 4ピクセル) -->
          <div class="pixel" style="top: 4px; left: 7px; width: 1px; height: 4px;"></div>
          
          <!-- 左腕 (上向き) -->
          <div class="pixel" style="top: 4px; left: 5px; width: 2px; height: 1px;"></div>
          <div class="pixel" style="top: 3px; left: 5px; width: 1px; height: 1px;"></div>
          
          <!-- 右腕 (下向き) -->
          <div class="pixel" style="top: 6px; left: 8px; width: 2px; height: 1px;"></div>
          <div class="pixel" style="top: 7px; left: 9px; width: 1px; height: 1px;"></div>
          
          <!-- 左脚 (前進) -->
          <div class="pixel" style="top: 8px; left: 5px; width: 1px; height: 2px;"></div>
          <div class="pixel" style="top: 10px; left: 4px; width: 1px; height: 1px;"></div>
          
          <!-- 右脚 (後方) -->
          <div class="pixel" style="top: 8px; left: 8px; width: 1px; height: 2px;"></div>
          <div class="pixel" style="top: 10px; left: 9px; width: 1px; height: 1px;"></div>
        </div>
      </div>
      
      <!-- フレーム2: 歩行ポーズ（中間点） -->
      <div class="walk-frame frame2 pixel-character">
        <div class="pixel-grid">
          <!-- 頭部 (3x3の四角) -->
          <div class="pixel" style="top: 1px; left: 6px; width: 3px; height: 3px;"></div>
          
          <!-- 胴体 (縦線 4ピクセル) -->
          <div class="pixel" style="top: 4px; left: 7px; width: 1px; height: 4px;"></div>
          
          <!-- 左腕 (水平) -->
          <div class="pixel" style="top: 5px; left: 4px; width: 3px; height: 1px;"></div>
          
          <!-- 右腕 (水平) -->
          <div class="pixel" style="top: 5px; left: 8px; width: 3px; height: 1px;"></div>
          
          <!-- 左脚 (まっすぐ) -->
          <div class="pixel" style="top: 8px; left: 6px; width: 1px; height: 3px;"></div>
          
          <!-- 右脚 (まっすぐ) -->
          <div class="pixel" style="top: 8px; left: 8px; width: 1px; height: 3px;"></div>
        </div>
      </div>
      
      <!-- フレーム3: 歩行ポーズ（右脚前進） -->
      <div class="walk-frame frame3 pixel-character">
        <div class="pixel-grid">
          <!-- 頭部 (3x3の四角) -->
          <div class="pixel" style="top: 1px; left: 6px; width: 3px; height: 3px;"></div>
          
          <!-- 胴体 (縦線 4ピクセル) -->
          <div class="pixel" style="top: 4px; left: 7px; width: 1px; height: 4px;"></div>
          
          <!-- 左腕 (下向き) -->
          <div class="pixel" style="top: 6px; left: 5px; width: 2px; height: 1px;"></div>
          <div class="pixel" style="top: 7px; left: 4px; width: 1px; height: 1px;"></div>
          
          <!-- 右腕 (上向き) -->
          <div class="pixel" style="top: 4px; left: 8px; width: 2px; height: 1px;"></div>
          <div class="pixel" style="top: 3px; left: 9px; width: 1px; height: 1px;"></div>
          
          <!-- 左脚 (後方) -->
          <div class="pixel" style="top: 8px; left: 6px; width: 1px; height: 2px;"></div>
          <div class="pixel" style="top: 10px; left: 5px; width: 1px; height: 1px;"></div>
          
          <!-- 右脚 (前進) -->
          <div class="pixel" style="top: 8px; left: 9px; width: 1px; height: 2px;"></div>
          <div class="pixel" style="top: 10px; left: 10px; width: 1px; height: 1px;"></div>
        </div>
      </div>
      
      <!-- フレーム4: 歩行ポーズ（リズム転換） -->
      <div class="walk-frame frame4 pixel-character">
        <div class="pixel-grid">
          <!-- 頭部 (3x3の四角) -->
          <div class="pixel" style="top: 1px; left: 6px; width: 3px; height: 3px;"></div>
          
          <!-- 胴体 (縦線 4ピクセル) -->
          <div class="pixel" style="top: 4px; left: 7px; width: 1px; height: 4px;"></div>
          
          <!-- 左腕 (水平) -->
          <div class="pixel" style="top: 5px; left: 4px; width: 3px; height: 1px;"></div>
          
          <!-- 右腕 (水平) -->
          <div class="pixel" style="top: 5px; left: 8px; width: 3px; height: 1px;"></div>
          
          <!-- 左脚 (まっすぐ) -->
          <div class="pixel" style="top: 8px; left: 6px; width: 1px; height: 3px;"></div>
          
          <!-- 右脚 (まっすぐ) -->
          <div class="pixel" style="top: 8px; left: 8px; width: 1px; height: 3px;"></div>
        </div>
      </div>
      
    </div>
  </div>
  
  <script>
    // カードデータ（セクション区切りカード含む）
    const cardsData = [
      // 会社セクション区切りカード（8bitドット絵風アスキーアート）
      { icon: '[#]', title: '会社', description: 'TOMOREBEYOND について', section: 'company', type: 'divider', link: '#' },
      { icon: '[]', title: '会社概要', description: 'MICHI NAKI MICHI WO KIRU', section: 'company', link: 'detail/company.html' },
      { icon: 'X', title: 'ミッション', description: 'OMOSHIROI KOTO DAKE WO SURU', section: 'company', link: 'detail/mission.html' },
      
      // アプリセクション区切りカード
      { icon: '[A]', title: 'アプリ', description: 'WATASHITACHI NO PRODUCT', section: 'apps', type: 'divider', link: '#' },
      { icon: '+', title: 'TADATAKA', description: 'IDOU GA SONO MAMA NIKKI NI', section: 'apps', link: 'pages/tadataka.html' },
      { icon: 'T', title: 'TOIRUN', description: 'IMA SUGU TOIRE WO SAITAN DE', section: 'apps', link: 'pages/toirun.html' },
      { icon: 'M', title: 'MEET IN THE MIDDLE', description: 'SAITEKI NA SHUUGOU CHITEN WO', section: 'apps', link: 'pages/midpoint.html' },
      
      // チームメンバーセクション区切りカード
      { icon: '[M]', title: 'チームメンバー', description: 'ISSHO NI AYUMU NAKAMA TACHI', section: 'members', type: 'divider', link: '#' },
      { icon: 'Y', title: '山田', description: 'CDO / DESIGNER', section: 'members', link: 'detail/yamada.html' },
      { icon: 'M', title: '正留', description: 'CEO / ENGINEER', section: 'members', link: 'detail/masadome.html' },
      { icon: 'A', title: '安藤', description: 'ARTIST', section: 'members', link: 'detail/ando.html' },
      
      // メディアセクション区切りカード
      { icon: '[I]', title: 'メディア', description: 'JOUHOU HASSHIN TO KATSUDOU', section: 'media', type: 'divider', link: '#' },
      { icon: 'B', title: 'ブログ', description: 'KAIHATSU NO URA BANASHI', section: 'media', link: 'detail/blog.html' },
      { icon: 'V', title: '動画', description: 'PRODUCT SHOUKAI', section: 'media', link: 'detail/video.html' },
      { icon: 'S', title: 'SNS', description: 'HIBI NO HASSHIN', section: 'media', link: 'detail/sns.html' },
      
      // コンタクトセクション区切りカード
      { icon: '[C]', title: 'コンタクト', description: 'TSUNAGARI WO TAISETSU NI', section: 'contact', type: 'divider', link: '#' },
      { icon: '@', title: 'お問い合わせ', description: 'OKI GARU NI DOUZO', section: 'contact', link: 'detail/contact.html' }
    ];
    
    class MinimalSite {
      constructor() {
        this.currentSection = 'company';
        this.sections = ['company', 'apps', 'members', 'media', 'contact'];
        this.sectionIndex = 0;
        this.isScrolling = false;
        this.scrollTimer = null;
        this.baseScrollSpeed = 60;
        this.currentScrollSpeed = this.baseScrollSpeed;
        this.walkSpeed = 0.8;
        this.speedMultiplier = 1.0;
        this.isNavigating = false;
        
        // 棒人間アニメーション管理
        this.walkingInterval = null;
        this.pointingTimeout = null;
        this.currentWalkFrame = 0;
        this.walkFrames = ['frame1', 'frame2', 'frame3', 'frame4'];
        
        // パフォーマンス最適化用のRAF管理
        this.rafId = null;
        this.lastTime = 0;
        
        // 新しい横スクロール構造管理
        this.characterPosition = 0.05; // 開始位置をより左に（ほぼ左端）
        this.totalJourneyWidth = window.innerWidth * 6; // 6画面分の旅路
        this.sectionCheckpoints = [
          { name: 'apps', position: 0.16, title: 'アプリ' },
          { name: 'company', position: 0.32, title: '会社' },
          { name: 'members', position: 0.48, title: 'メンバー' },
          { name: 'media', position: 0.64, title: 'メディア' },
          { name: 'contact', position: 0.8, title: 'コンタクト' }
        ];
        this.currentCheckpoint = -1; // 初期状態は-1
        this.isAtCheckpoint = false;
        this.checkpointPauseTime = 2000; // 2秒間チェックポイントで停止
        
        // キャラクター進化システム
        this.evolutionLevel = 0; // 0-5の進化レベル
        this.evolutionThresholds = [0.2, 0.4, 0.6, 0.8, 1.0]; // 進化が起こる位置
        
        // カードスクロール管理
        this.cardScrollTimeout = null;
        
        // ローディング管理
        this.loadingProgress = 0;
        this.loadingMessages = [
          '旅の準備中...',
          '道を探しています...',
          'アプリを読み込んでいます...',
          'メンバーを集めています...',
          '最終準備中...',
          '旅立ちの時です！'
        ];
        
        this.startLoading();
        this.prepareVideoTransition();
      }
      
      prepareVideoTransition() {
        // 動画遷移シーケンスの準備
        this.videoBackground = document.getElementById('videoBackground');
        this.transitionOverlay = document.getElementById('transitionOverlay');
        this.logoPopup = document.getElementById('logoPopup');
      }
      
      startVideoSequence() {
        // 将来的に動画が準備されたらここで制御
        // 1. 動画開始
        // 2. ロゴポップアップ表示
        // 3. フェードアウト
        // 4. ゲーム世界表示
        
        // 現在は直接ゲーム画面を表示
        setTimeout(() => {
          this.showLogoPopup();
        }, 500);
      }
      
      showLogoPopup() {
        const logoPopup = document.getElementById('logoPopup');
        logoPopup.classList.add('show');
        
        setTimeout(() => {
          logoPopup.classList.remove('show');
          logoPopup.classList.add('hide');
          
          setTimeout(() => {
            this.showGameWorld();
          }, 800);
        }, 2000);
      }
      
      showGameWorld() {
        const mainContent = document.querySelector('.main-content');
        if (mainContent) {
          mainContent.style.opacity = '1';
          mainContent.style.visibility = 'visible';
        }
        
        // ゲーム要素を表示
        const character = document.querySelector('.tiny-character');
        const signposts = document.querySelector('.signpost-container');
        
        if (character) {
          character.style.opacity = '1';
        }
        if (signposts) {
          signposts.style.opacity = '1';
        }
      }
      
      startLoading() {
        const loadingScreen = document.getElementById('loadingScreen');
        const progressFill = document.getElementById('progressFill');
        const loadingText = document.getElementById('loadingText');
        
        let progress = 0;
        let messageIndex = 0;
        
        const loadingInterval = setInterval(() => {
          progress += Math.random() * 15 + 5; // 5-20%ずつ進行
          
          if (progress >= 100) {
            progress = 100;
            clearInterval(loadingInterval);
            
            // ローディング完了
            setTimeout(() => {
              this.completeLoading();
            }, 500);
          }
          
          // プログレスバー更新
          if (progressFill) {
            progressFill.style.width = `${progress}%`;
          }
          
          // メッシージ更新
          if (loadingText && messageIndex < this.loadingMessages.length - 1) {
            const newIndex = Math.floor((progress / 100) * (this.loadingMessages.length - 1));
            if (newIndex > messageIndex) {
              messageIndex = newIndex;
              loadingText.textContent = this.loadingMessages[messageIndex];
            }
          }
        }, 300 + Math.random() * 400); // 300-700ms間隔
      }
      
      completeLoading() {
        const loadingScreen = document.getElementById('loadingScreen');
        const body = document.body;
        
        // ローディング画面をフェードアウト
        if (loadingScreen) {
          loadingScreen.classList.add('hidden');
        }
        
        // ボディの状態を変更
        body.classList.remove('loading');
        body.classList.add('loaded');
        
        // 動画シーケンスを開始（将来的に動画が準備されたら）
        setTimeout(() => {
          this.startVideoSequence();
        }, 500);
        
        // メインコンテンツの初期化を開始
        setTimeout(() => {
          this.init();
        }, 300);
      }
      
      init() {
        this.createCards();
        this.setupEventListeners();
        this.createStonePattern();
        this.createPathDecorations();
        
        // カードが確実に表示されてから初期化
        setTimeout(() => {
          this.startAutoScroll();
          this.optimizePerformance();
        }, 100);
        
        // 初期状態でアイドルフレームを表示
        setTimeout(() => {
          if (!this.isScrolling) {
            this.showIdleFrame();
          }
        }, 500); // ローディング後は少し遅らせる
      }
      
      createStonePattern() {
        const pattern = document.getElementById('stonePattern');
        if (!pattern) return;
        
        // 石ブロックを生成
        const stoneCount = Math.ceil(window.innerWidth / 40) + 10;
        pattern.innerHTML = ''; // 既存のコンテンツをクリア
        
        for (let i = 0; i < stoneCount; i++) {
          const stone = document.createElement('div');
          stone.className = 'stone-block';
          
          // ランダムな幅で石畳感を演出
          const widthVariation = 50 + Math.random() * 30;
          stone.style.width = `${widthVariation}px`;
          
          // ランダムな色のバリエーション
          const brightness = 0.9 + Math.random() * 0.2;
          stone.style.filter = `brightness(${brightness})`;
          
          pattern.appendChild(stone);
        }
      }
      
      createPathDecorations() {
        const decoration = document.getElementById('pathDecoration');
        if (!decoration) return;
        
        decoration.innerHTML = '';
        
        // より少ない装飾でメモリ効率化
        for (let i = 0; i < 8; i++) {
          const item = document.createElement('div');
          item.className = 'decoration-item';
          
          // 石のみでシンプルに
          item.classList.add('stone');
          
          // 固定位置でメモリ効率化
          const positions = [10, 20, 30, 45, 60, 70, 80, 90];
          item.style.left = `${positions[i]}%`;
          
          // アニメーション遅延を最小限に
          item.style.animationDelay = `${i * 0.5}s`;
          
          decoration.appendChild(item);
        }
      }
      
      optimizePerformance() {
        // デバイス能力を検出
        this.detectDeviceCapability();
        
        // メモリ効率のためのRAF最適化
        this.startRAFLoop();
        
        // 不要なイベントを削除するデバウンス機能
        this.debounceCleanup();
        
        // GPU最適化
        this.enableGPUOptimizations();
      }
      
      detectDeviceCapability() {
        // 低性能デバイスを検出
        this.isLowEndDevice = (
          (navigator.deviceMemory && navigator.deviceMemory <= 2) ||
          (navigator.hardwareConcurrency && navigator.hardwareConcurrency <= 2) ||
          /Android.*Chrome\/[0-8]/.test(navigator.userAgent) ||
          /iPhone.*OS [1-1][0-3]/.test(navigator.userAgent) ||
          window.innerWidth < 768
        );
        
        // 中程度の性能デバイス
        this.isMidEndDevice = (
          (navigator.deviceMemory && navigator.deviceMemory <= 4) ||
          (navigator.hardwareConcurrency && navigator.hardwareConcurrency <= 4)
        );
        
        if (this.isLowEndDevice) {
          document.body.classList.add('low-performance-mode');
        } else if (this.isMidEndDevice) {
          // 中程度の最適化
          this.baseScrollSpeed = 40;
        }
      }
      
      enableGPUOptimizations() {
        // 重要な要素にGPU最適化を適用
        const criticalElements = [
          '.tiny-character',
          '.stick-figure',
          '.cards-track',
          '.path-area'
        ];
        
        criticalElements.forEach(selector => {
          const elements = document.querySelectorAll(selector);
          elements.forEach(el => {
            el.style.transform = el.style.transform || 'translateZ(0)';
            el.style.willChange = 'transform';
            el.style.backfaceVisibility = 'hidden';
          });
        });
      }
      
      startRAFLoop() {
        const loop = (currentTime) => {
          if (currentTime - this.lastTime >= 16) { // 60FPS制限
            this.updateAnimations();
            this.lastTime = currentTime;
          }
          this.rafId = requestAnimationFrame(loop);
        };
        this.rafId = requestAnimationFrame(loop);
      }
      
      updateAnimations() {
        // 必要に応じてアニメーション更新
        if (this.isScrolling) {
          this.optimizeWalkingAnimation();
        }
      }
      
      debounceCleanup() {
        // 5秒ごとにメモリクリーンアップ
        setInterval(() => {
          if (!this.isScrolling && !this.isNavigating) {
            this.cleanupUnusedElements();
          }
        }, 5000);
      }
      
      cleanupUnusedElements() {
        // 不要なDOM要素の掃除（メモリ効率化）
        const unusedCards = document.querySelectorAll('.card[data-cleanup="true"]');
        unusedCards.forEach(card => {
          if (card.parentNode) {
            card.parentNode.removeChild(card);
          }
        });
      }
      
      createCards() {
        const track = document.getElementById('cardsTrack');
        if (!track) {
          console.error('Cards track not found!');
          return;
        }
        
        const cardsHTML = [];
        
        // 1セットのみ作成（区切りカードを含むため）
        cardsData.forEach(data => {
          const dividerClass = data.type === 'divider' ? ' divider' : '';
          cardsHTML.push(`
            <div class="card${dividerClass}" data-section="${data.section}" data-link="${data.link}" data-type="${data.type || 'normal'}">
              <div class="card-icon">${data.icon}</div>
              <h3 class="card-title">${data.title}</h3>
              <p class="card-description">${data.description}</p>
            </div>
          `);
        });
        
        track.innerHTML = cardsHTML.join('');
        
        // カードが確実に表示されるように
        track.style.visibility = 'visible';
        track.style.opacity = '1';
        track.style.display = 'flex';
        
        // カードクリックイベント
        track.querySelectorAll('.card').forEach(card => {
          card.addEventListener('click', () => {
            const link = card.dataset.link;
            const type = card.dataset.type;
            
            // 区切りカードの場合はクリックを無効化
            if (type === 'divider') {
              return;
            }
            
            if (link && link !== '#') {
              window.location.href = link;
            }
          });
          
          // ホバー時の反応（区切りカード以外）
          if (card.dataset.type !== 'divider') {
            card.addEventListener('mouseenter', () => {
              this.onCardHover(card);
            });
            
            card.addEventListener('mouseleave', () => {
              this.onCardLeave(card);
            });
          }
        });
      }
      
      setupEventListeners() {
        // 自然な縦スクロール体験 - 縦スクロールで棒人間が横移動
        let scrollTimeout;
        
        // 通常の縦スクロールを有効にし、progress-basedの横移動を実装
        window.addEventListener('scroll', () => {
          clearTimeout(scrollTimeout);
          this.handleVerticalScroll();
          
          // スクロール終了を検知
          scrollTimeout = setTimeout(() => {
            this.optimizeAfterScroll();
          }, 150);
        }, { passive: true });
        
        // ホイールイベントで横スクロールも対応
        window.addEventListener('wheel', (e) => {
          // 横ホイールまたはShift+縦ホイールの場合は横移動
          if (e.deltaX !== 0 || e.shiftKey) {
            e.preventDefault();
            const scrollDelta = e.deltaX !== 0 ? e.deltaX : e.deltaY;
            this.handleHorizontalScroll(scrollDelta);
          }
          // 通常の縦ホイールは自然にスクロールさせる（preventDefault しない）
        }, { passive: false });
        
        // ナビゲーション削除により不要
        
        // モバイル向けタッチイベント最適化
        let touchStartY = 0;
        let touchStartTime = 0;
        let isTouchScrolling = false;
        
        document.addEventListener('touchstart', (e) => {
          touchStartY = e.touches[0].clientY;
          touchStartTime = Date.now();
          isTouchScrolling = true;
        }, { passive: true });
        
        document.addEventListener('touchend', () => {
          isTouchScrolling = false;
        }, { passive: true });
        
        // モバイルでのスクロール感度をさらに調整
        let mobileScrollTimeout;
        document.addEventListener('touchmove', (e) => {
          if (!isTouchScrolling) return;
          
          clearTimeout(mobileScrollTimeout);
          mobileScrollTimeout = setTimeout(() => {
            this.optimizeAfterScroll();
          }, 200); // モバイルでは少し長めのタイムアウト
        }, { passive: true });
        
        // キーボードナビゲーション - 左右キー対応
        document.addEventListener('keydown', (e) => {
          if (e.key === 'ArrowLeft') {
            e.preventDefault();
            this.handleScroll(-50); // 左方向
          }
          if (e.key === 'ArrowRight') {
            e.preventDefault();
            this.handleScroll(50); // 右方向
          }
          if (e.key === 'ArrowUp') {
            e.preventDefault();
            this.handleScroll(-50); // 上キーも左方向
          }
          if (e.key === 'ArrowDown') {
            e.preventDefault();
            this.handleScroll(50); // 下キーも右方向
          }
        });
      }
      
      optimizeAfterScroll() {
        // スクロール終了後の最適化処理
        this.speedMultiplier = 1.0;
        this.updateWalkingSpeed();
      }
      
      handleVerticalScroll() {
        // 縦スクロールに基づく棒人間の横移動（より自然で緩やかな体験）
        const scrollTop = window.pageYOffset;
        const documentHeight = document.documentElement.scrollHeight - window.innerHeight;
        const rawScrollProgress = Math.min(scrollTop / Math.max(documentHeight, 1), 1);
        
        // モバイルかどうかを判定してスクロール感度を調整
        const isMobile = window.innerWidth <= 768 || 'ontouchstart' in window;
        
        // スクロール感度を大幅に下げるための調整
        // イージング関数を使用してより自然な進行にする
        const easedProgress = this.easeInOutCubic(rawScrollProgress);
        // もう少し重めに調整
        const dampingFactor = isMobile ? 0.005 : 0.01; // モバイルでは0.5%、デスクトップでは1% - より遅く
        const scrollProgress = easedProgress * dampingFactor;
        
        // 不要なUI更新を削除（関数が削除されているため）
        
        // スクロール進行度に基づいて棒人間の位置を計算（緩やかな移動）
        const oldPosition = this.characterPosition;
        
        // スムージング処理: 急激な変化を抑制
        const targetPosition = scrollProgress;
        // もう少し重めのスムージング
        const smoothingFactor = isMobile ? 0.001 : 0.002; // モバイルでは0.1%、デスクトップでは0.2% - よりゆっくり
        this.characterPosition += (targetPosition - this.characterPosition) * smoothingFactor;
        
        // キャラクターの位置を更新
        this.updateCharacterPosition(oldPosition);
        
        // カードの表示もスクロール進行度に合わせて更新
        this.updateCardScrollProgress(this.characterPosition);
        
        // 歩行アニメーション（適度な閾値）
        if (Math.abs(oldPosition - this.characterPosition) > 0.001) {
          this.startJourneyWalking();
          
          // 移動方向を判定
          const isMovingRight = this.characterPosition > oldPosition;
          this.updateCharacterDirection(isMovingRight);
          
          // 歩行停止タイマー（少し長めに）
          clearTimeout(this.scrollTimer);
          this.scrollTimer = setTimeout(() => {
            this.stopJourneyWalking();
          }, 500);
        }
      }
      
      // イージング関数: より自然な進行カーブ
      easeInOutCubic(t) {
        return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
      }
      
      
      handleHorizontalScroll(deltaX) {
        // 横スクロールでの手動移動（Shift+ホイールなど）
        const scrollDirection = deltaX > 0 ? 1 : -1;
        const baseSensitivity = this.isLowEndDevice ? 0.008 : 0.012;
        const movementAmount = Math.abs(deltaX) * baseSensitivity;
        
        const oldPosition = this.characterPosition;
        this.characterPosition += scrollDirection * movementAmount;
        this.characterPosition = Math.max(0, Math.min(1, this.characterPosition));
        
        // キャラクターの位置を更新
        this.updateCharacterPosition(oldPosition);
        this.updateCharacterDirection(scrollDirection > 0);
        
        // カードスクロールの更新
        this.updateCardScroll();
        
        // 歩行開始
        if (!this.isScrolling) {
          this.startJourneyWalking();
        }
        
        // 歩行停止タイマー
        clearTimeout(this.scrollTimer);
        this.scrollTimer = setTimeout(() => {
          this.stopJourneyWalking();
        }, 300);
      }
      
      updateCharacterPosition(oldPosition) {
        if (oldPosition === this.characterPosition) return;
        
        const screenWidth = window.innerWidth;
        const characterScreenX = 20 + (screenWidth - 120) * this.characterPosition;
        
        const character = document.querySelector('.tiny-character');
        if (character) {
          character.style.left = `${characterScreenX}px`;
        }
      }
      
      updateCharacterDirection(isMovingRight) {
        const character = document.querySelector('.tiny-character');
        if (character) {
          if (isMovingRight) {
            character.classList.add('facing-right');
            character.classList.remove('facing-left');
          } else {
            character.classList.add('facing-left');
            character.classList.remove('facing-right');
          }
        }
      }
      
      updateCardScrollProgress(scrollProgress) {
        // スクロール進行度に基づいてカードを流れるように表示（バグ修正版）
        const track = document.querySelector('.cards-track');
        if (!track) return;
        
        const cards = track.querySelectorAll('.card');
        const totalCards = cards.length;
        
        if (totalCards === 0) return;
        
        // 棒人間とカードの完全同期を実現
        const safeCharacterPosition = Math.max(0, Math.min(1, this.characterPosition));
        const containerWidth = track.parentElement?.offsetWidth || window.innerWidth;
        const cardWidth = 256 + 20; // カード幅 + gap
        const totalWidth = cardWidth * totalCards;
        const maxOffset = Math.max(0, totalWidth - containerWidth);
        
        // 棒人間位置とカードスクロールを完全同期
        // 棒人間が右端(1.0)の時、コンタクトカードが最大右に表示される
        const perfectSyncOffset = -maxOffset * safeCharacterPosition;
        
        // 各カードの表示状態を更新（消失バグ修正）
        cards.forEach((card, index) => {
          // カードが確実に表示されるように visibility を保証
          card.style.visibility = 'visible';
          card.style.opacity = '1';
          card.style.display = 'flex';
          
          // 棒人間位置とカードインデックスの完全同期
          const currentCardIndex = Math.round(safeCharacterPosition * (totalCards - 1));
          const distanceFromCharacter = Math.abs(index - currentCardIndex);
          
          // CSS クラスをリセット
          card.classList.remove('distant', 'nearby', 'current', 'highlighted');
          
          // 棒人間位置と完全に同期したハイライト
          if (distanceFromCharacter === 0) {
            card.classList.add('current');
            card.classList.add('highlighted');
          } else if (distanceFromCharacter === 1) {
            card.classList.add('nearby');
          } else {
            card.classList.add('distant');
          }
        });
        
        track.style.transform = `translateX(${perfectSyncOffset}px) translateZ(0)`;
      }
      
      updateCardPositionUltraSmooth() {
        // 前回のRAFをキャンセル
        if (this.cardPositionRAF) {
          cancelAnimationFrame(this.cardPositionRAF);
        }
        
        // 60FPS で滑らかに更新
        this.cardPositionRAF = requestAnimationFrame(() => {
          const track = document.getElementById('cardsTrack');
          if (track && track.children.length > 0) {
            // スクロール中は完全に滑らか
            // 統一されたトランジションを使用
            
            // より滑らかな変換
            const smoothOffset = this.currentScrollOffset || 0;
            track.style.transform = `translateX(${smoothOffset}px) translateZ(0)`;
            track.style.visibility = 'visible';
            track.style.opacity = '1';
            
          }
        });
      }
      
      updateCardPositionSmooth() {
        if (this.cardPositionRAF) {
          cancelAnimationFrame(this.cardPositionRAF);
        }
        
        this.cardPositionRAF = requestAnimationFrame(() => {
          const track = document.getElementById('cardsTrack');
          if (track) {
            // スクロール中はクラスを切り替えて滑らかに
            // 統一されたトランジションを使用
            track.style.setProperty('--scroll-offset', `${this.currentScrollOffset}px`);
          }
        });
      }
      
      updateCardPosition() {
        const track = document.getElementById('cardsTrack');
        if (track) {
          track.style.transform = `translateX(${this.currentScrollOffset}px) translateZ(0)`;
        }
      }
      
      updateCardScroll() {
        const track = document.getElementById('cardsTrack');
        if (!track) return;
        
        // 棒人間とカードの完全同期を実現
        const cards = track.children;
        if (cards.length === 0) return;
        
        const cardWidth = 256 + 20; // カード幅 + ギャップ
        const containerWidth = track.parentElement?.offsetWidth || window.innerWidth;
        const totalCardsWidth = cardWidth * cards.length;
        const maxScroll = Math.max(0, totalCardsWidth - containerWidth);
        
        // 棒人間の位置 (0-1) をカードスクロールに完全同期
        // 棒人間が右端(1.0)の時、コンタクトカードが一番右に来る
        const perfectSync = -maxScroll * this.characterPosition;
        
        track.style.transform = `translateX(${perfectSync}px) translateZ(0)`;
        
        // カードのハイライト状態を棒人間位置と同期
        const currentCardIndex = Math.floor(this.characterPosition * (cards.length - 1));
        
        Array.from(cards).forEach((card, index) => {
          card.classList.remove('current', 'nearby', 'distant', 'highlighted');
          
          if (index === currentCardIndex) {
            card.classList.add('current', 'highlighted');
          } else if (Math.abs(index - currentCardIndex) <= 1) {
            card.classList.add('nearby');
          } else {
            card.classList.add('distant');
          }
        });
      }
      
      
      updateCardSpeed() {
        const track = document.getElementById('cardsTrack');
        track.style.setProperty('--scroll-speed', `${this.currentScrollSpeed}s`);
      }
      
      
      resetToNormalSpeed() {
        this.speedMultiplier = 1.0;
        this.walkSpeed = 0.8;
        this.currentScrollSpeed = this.baseScrollSpeed;
        this.updateCardSpeed();
        this.updateWalkingSpeed();
      }
      
      optimizeWalkingAnimation() {
        // 歩行アニメーションの最適化
        const character = document.querySelector('.tiny-character');
        const container = document.querySelector('.cards-container');
        
        if (this.speedMultiplier > 2.0 && character) {
          // 高速時は簡略化されたアニメーション
          character.classList.add('fast-walking');
          container.classList.add('fast-3d-mode');
        } else if (character) {
          character.classList.remove('fast-walking');
          container.classList.remove('fast-3d-mode');
        }
      }
      
      startRunning() {
        // 既に歩行中の場合は何もしない
        if (this.isScrolling) {
          return;
        }
        
        this.isScrolling = true;
        const container = document.querySelector('.tiny-character');
        
        // 歩行状態を設定
        if (container) {
          container.classList.add('walking');
        }
        
        // 指差しアニメーションを停止
        this.clearPointingAnimation();
        
        // 歩行アニメーション開始
        this.startWalkingAnimation();
      }
      
      clearPointingAnimation() {
        // 指差しアニメーションをクリア
        if (this.pointingTimeout) {
          clearTimeout(this.pointingTimeout);
          this.pointingTimeout = null;
        }
        
        const pointingFrame = document.querySelector('.walk-frame.pointing');
        if (pointingFrame) {
          pointingFrame.classList.remove('active');
        }
      }
      
      startWalkingAnimation() {
        // 既存のアニメーションを安全に停止
        this.clearWalkingAnimation();
        
        // 初期状態をリセット
        this.currentWalkFrame = 0;
        this.walkFrames = ['frame1', 'frame2', 'frame3', 'frame4'];
        
        // アイドルフレームを非表示
        this.hideAllFrames();
        // トランスフォーム状態をクリーンアップ
        this.clearTransforms();
        
        // 安定したフレーム速度（パフォーマンス改善）
        const frameDuration = 150; // 固定間隔で安定性を向上
        
        // 最初のフレームを表示
        this.showFrame(this.walkFrames[0]);
        
        // 定期的なフレーム更新
        this.walkingInterval = setInterval(() => {
          if (!this.isScrolling) {
            return;
          }
          
          this.nextWalkFrame();
        }, frameDuration);
      }
      
      nextWalkFrame() {
        // 現在のフレームを非表示
        this.hideFrame(this.walkFrames[this.currentWalkFrame]);
        
        // 次のフレームへ
        this.currentWalkFrame = (this.currentWalkFrame + 1) % this.walkFrames.length;
        
        // 新しいフレームを表示
        this.showFrame(this.walkFrames[this.currentWalkFrame]);
      }
      
      showFrame(frameClass) {
        const frame = document.querySelector(`.walk-frame.${frameClass}`);
        if (frame) {
          frame.classList.add('active');
        }
      }
      
      hideFrame(frameClass) {
        const frame = document.querySelector(`.walk-frame.${frameClass}`);
        if (frame) {
          frame.classList.remove('active');
        }
      }
      
      hideAllFrames() {
        // 全フレームを非表示
        document.querySelectorAll('.walk-frame').forEach(frame => {
          frame.classList.remove('active');
        });
      }
      
      clearWalkingAnimation() {
        if (this.walkingInterval) {
          clearInterval(this.walkingInterval);
          this.walkingInterval = null;
        }
        
        // 状態をリセット
        this.currentWalkFrame = 0;
        
        // 全歩行フレームを非表示
        this.hideAllFrames();
      }
      
      clearTransforms() {
        // トランスフォーム競合を防ぐためのクリーンアップ
        const character = document.querySelector('.tiny-character');
        if (character) {
          // 基本のトランスフォームのみ保持
          character.style.transform = 'translateZ(0)';
          // 競合するクラスを削除
          character.classList.remove('looking-left', 'looking-right', 'fast-walking');
        }
      }
      
      stopRunning() {
        this.isScrolling = false;
        const container = document.querySelector('.tiny-character');
        const track = document.getElementById('cardsTrack');
        
        // 歩行状態をクリア
        if (container) {
          container.classList.remove('walking', 'fast-walking');
        }
        
        // 歩行アニメーションを安全に停止
        this.clearWalkingAnimation();
        
        // アイドル状態に戻る
        setTimeout(() => {
          if (!this.isScrolling) {
            this.showIdleFrame();
            
            // 指差しアニメーションを開始
            setTimeout(() => {
              if (!this.isScrolling) {
                this.startPointingAnimation();
              }
            }, 300);
          }
        }, 100);
        
        // カードトラックをアイドル状態に
        if (track) {
          // スクロール完了
        }
      }
      
      showIdleFrame() {
        // 全フレームを非表示
        this.hideAllFrames();
        
        // アイドルフレームを表示
        const idleFrame = document.querySelector('.walk-frame.idle');
        if (idleFrame) {
          idleFrame.classList.add('active');
        }
      }
      
      startPointingAnimation() {
        // 歩行中は指差しアニメーションを行わない
        if (this.isScrolling) {
          return;
        }
        
        const character = document.querySelector('.tiny-character');
        if (!character) {
          return;
        }
        
        // 現在表示中のカードを取得
        const viewportCenter = window.innerWidth / 2;
        const cards = document.querySelectorAll('.card');
        let closestCard = null;
        let minDistance = Infinity;
        
        cards.forEach(card => {
          const rect = card.getBoundingClientRect();
          const cardCenter = rect.left + rect.width / 2;
          const distance = Math.abs(cardCenter - viewportCenter);
          
          if (distance < minDistance && rect.left > 0 && rect.right < window.innerWidth) {
            minDistance = distance;
            closestCard = card;
          }
        });
        
        if (closestCard) {
          // 指差しフレームを作成
          this.showPointingFrame(closestCard);
          
          // 視線エフェクト
          this.createGazeEffect(closestCard);
        }
      }
      
      showPointingFrame(targetCard) {
        // 歩行中は指差ししない
        if (this.isScrolling) {
          return;
        }
        
        // アイドルフレームを非表示
        this.hideAllFrames();
        
        // 指差しフレームを作成または更新
        let pointingFrame = document.querySelector('.walk-frame.pointing');
        if (!pointingFrame) {
          pointingFrame = this.createPointingFrame();
          const container = document.querySelector('.walking-animation-container');
          if (container) {
            container.appendChild(pointingFrame);
          }
        }
        
        if (pointingFrame) {
          pointingFrame.classList.add('active');
        }
        
        // カードのハイライト
        if (targetCard) {
          targetCard.classList.add('highlighted');
        }
        
        // 一定時間後にアイドルに戻る
        this.pointingTimeout = setTimeout(() => {
          if (!this.isScrolling) {
            if (pointingFrame) {
              pointingFrame.classList.remove('active');
            }
            if (targetCard) {
              targetCard.classList.remove('highlighted');
            }
            this.showIdleFrame();
          }
        }, 2000);
      }
      
      createPointingFrame() {
        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        svg.setAttribute('class', 'walk-frame pointing');
        svg.setAttribute('viewBox', '0 0 100 150');
        
        svg.innerHTML = `
          <g stroke="#333" stroke-width="6" stroke-linecap="round" fill="none">
            <!-- 頭（カードを見上げる） -->
            <circle cx="50" cy="15" r="12" fill="#333" stroke="none"/>
            <!-- 胴体（少し後傾） -->
            <line x1="50" y1="27" x2="48" y2="62"/>
            <!-- 左腕（指差し） -->
            <line x1="48" y1="35" x2="30" y2="25"/>
            <line x1="30" y1="25" x2="20" y2="20"/>
            <!-- 人差し指 -->
            <line x1="20" y1="20" x2="15" y2="18" stroke-width="4"/>
            <!-- 右腕（自然に下ろす） -->
            <line x1="48" y1="35" x2="55" y2="50"/>
            <line x1="55" y1="50" x2="58" y2="68"/>
            <!-- 左脚 -->
            <line x1="48" y1="62" x2="45" y2="85"/>
            <line x1="45" y1="85" x2="44" y2="110"/>
            <!-- 右脚 -->
            <line x1="48" y1="62" x2="51" y2="85"/>
            <line x1="51" y1="85" x2="52" y2="110"/>
          </g>
        `;
        
        return svg;
      }
      
      createGazeEffect(targetCard) {
        const effect = document.createElement('div');
        effect.className = 'gaze-effect';
        
        const rect = targetCard.getBoundingClientRect();
        const characterPos = document.querySelector('.tiny-character').getBoundingClientRect();
        
        // 視線の角度を計算
        const angle = Math.atan2(
          rect.top + rect.height / 2 - characterPos.top,
          rect.left + rect.width / 2 - characterPos.left
        ) * 180 / Math.PI;
        
        effect.style.cssText = `
          position: fixed;
          left: ${characterPos.left + characterPos.width / 2}px;
          top: ${characterPos.top + 20}px;
          width: 2px;
          height: ${Math.sqrt(
            Math.pow(rect.left + rect.width / 2 - characterPos.left - characterPos.width / 2, 2) +
            Math.pow(rect.top + rect.height / 2 - characterPos.top - 20, 2)
          )}px;
          background: linear-gradient(to bottom, rgba(255, 179, 0, 0.8), transparent);
          transform-origin: top;
          transform: rotate(${angle + 90}deg);
          pointer-events: none;
          animation: gazeFlash 0.5s ease-out;
        `;
        
        document.body.appendChild(effect);
        
        setTimeout(() => {
          effect.remove();
        }, 500);
      }
      
      
      navigateToSection(sectionName) {
        if (this.currentSection === sectionName) return;
        
        this.isNavigating = true;
        
        // 高速歩行でセクションに移動
        this.speedMultiplier = 3.0;
        this.walkSpeed = 0.25;
        this.currentScrollSpeed = 15;
        
        this.updateCardPosition();
        
        // セクション切り替え
        setTimeout(() => {
          this.changeSection(sectionName);
          
          // 通常状態に戻す
          setTimeout(() => {
            this.isNavigating = false;
          }, 800);
        }, 400);
      }
      
      changeSection(sectionName) {
        if (this.currentSection === sectionName) return;
        
        this.currentSection = sectionName;
        document.body.className = `section-${sectionName}`;
        
        // ナビゲーション更新
        document.querySelectorAll('.nav-item').forEach(nav => {
          nav.classList.toggle('active', nav.dataset.section === sectionName);
        });
        
        this.sectionIndex = this.sections.indexOf(sectionName);
        
        // セクション特有のカードを強調表示
        this.highlightSectionCards(sectionName);
      }
      
      highlightSectionCards(sectionName) {
        const allCards = document.querySelectorAll('.card');
        allCards.forEach(card => {
          if (card.dataset.section === sectionName) {
            card.style.transform = 'scale(1.05)';
            card.style.borderColor = '#4CAF50';
            setTimeout(() => {
              card.style.transform = '';
              card.style.borderColor = '';
            }, 1000);
          }
        });
      }
      
      nextSection() {
        this.sectionIndex = (this.sectionIndex + 1) % this.sections.length;
        this.changeSection(this.sections[this.sectionIndex]);
      }
      
      prevSection() {
        this.sectionIndex = (this.sectionIndex - 1 + this.sections.length) % this.sections.length;
        this.changeSection(this.sections[this.sectionIndex]);
      }
      
      startAutoScroll() {
        // 新しい横スクロール旅路の初期化
        this.characterPosition = 0;
        this.currentCheckpoint = -1;
        this.isAtCheckpoint = false;
        
        // キャラクターを左端（スタート地点）に配置
        const character = document.querySelector('.tiny-character');
        if (character) {
          character.style.left = '20px';
          character.classList.add('facing-right'); // 初期は右向き
        }
        
        // カードの初期表示状態を設定
        const track = document.getElementById('cardsTrack');
        if (track) {
          track.classList.add('idle');
          track.classList.remove('scrolling');
          track.style.visibility = 'visible';
          track.style.opacity = '1';
          
          // カードが確実に表示されるように強制的に再描画
          track.offsetHeight;
        }
        
        // 初期セクション表示の更新
        this.updateSectionDisplay();
        
        // 初期カードスクロール位置設定
        this.updateCardScroll();
      }
      
      onCardHover(card) {
        const character = document.querySelector('.tiny-character');
        if (!character || this.isScrolling) return;
        
        // 棒人間がカードを見る
        const rect = card.getBoundingClientRect();
        const characterRect = character.getBoundingClientRect();
        
        // カードが画面内にある場合のみ反応
        if (rect.left > 0 && rect.right < window.innerWidth) {
          // 頭だけ傾けるアニメーション
          const lookDirection = rect.left < characterRect.left ? 'left' : 'right';
          character.classList.add(`looking-${lookDirection}`);
          
          // 小さなジャンプ
          character.style.transform = 'translateX(-50%) translateY(-5px) translateZ(0)';
        }
      }
      
      onCardLeave(card) {
        const character = document.querySelector('.tiny-character');
        if (!character) return;
        
        // 通常の状態に戻る
        character.classList.remove('looking-left', 'looking-right');
        character.style.transform = 'translateZ(0)';
      }
      
      // 新しい横スクロール旅路システムのメソッド
      startJourneyWalking() {
        this.isScrolling = true;
        const character = document.querySelector('.tiny-character');
        
        if (character) {
          character.classList.add('walking', 'journey-mode');
          character.classList.remove('at-checkpoint');
        }
        
        this.startWalkingAnimation();
      }
      
      stopJourneyWalking() {
        this.isScrolling = false;
        const character = document.querySelector('.tiny-character');
        
        if (character) {
          character.classList.remove('walking', 'journey-mode');
        }
        
        this.clearWalkingAnimation();
        
        setTimeout(() => {
          if (!this.isScrolling) {
            this.showIdleFrame();
          }
        }, 100);
      }
      
      checkForCheckpoints() {
        const tolerance = 0.05; // 5%の許容範囲
        
        for (let i = 0; i < this.sectionCheckpoints.length; i++) {
          const checkpoint = this.sectionCheckpoints[i];
          const distance = Math.abs(this.characterPosition - checkpoint.position);
          
          if (distance <= tolerance && i !== this.currentCheckpoint) {
            this.reachCheckpoint(i);
            break;
          }
        }
      }
      
      reachCheckpoint(checkpointIndex) {
        this.currentCheckpoint = checkpointIndex;
        this.isAtCheckpoint = true;
        
        const checkpoint = this.sectionCheckpoints[checkpointIndex];
        const character = document.querySelector('.tiny-character');
        
        if (character) {
          character.classList.add('at-checkpoint');
          // チェックポイントで一時停止
          this.stopJourneyWalking();
        }
        
        // セクション変更
        this.changeSection(checkpoint.name);
        
        // 2秒後に移動再開可能
        setTimeout(() => {
          this.isAtCheckpoint = false;
          if (character) {
            character.classList.remove('at-checkpoint');
          }
        }, this.checkpointPauseTime);
        
      }
      
      
      updateSectionDisplay() {
        // キャラクターの位置に基づいてカード表示を調整
        const cards = document.querySelectorAll('.card');
        const currentSection = this.getCurrentSectionFromPosition();
        
        cards.forEach(card => {
          const cardSection = card.dataset.section;
          const cardType = card.dataset.type;
          
          // 区切りカードは常に目立つように表示
          if (cardType === 'divider') {
            if (cardSection === currentSection) {
              card.style.opacity = '1';
              card.style.transform = 'scale(1)';
            } else {
              card.style.opacity = '0.9';
              card.style.transform = 'scale(0.98)';
            }
          } else {
            // 通常のカード
            if (cardSection === currentSection) {
              card.style.opacity = '1';
              card.style.transform = 'scale(1)';
            } else {
              card.style.opacity = '0.8';
              card.style.transform = 'scale(0.98)';
            }
          }
        });
      }
      
      getCurrentSectionFromPosition() {
        if (this.characterPosition < 0.16) return 'apps';
        if (this.characterPosition < 0.32) return 'company';
        if (this.characterPosition < 0.48) return 'members';
        if (this.characterPosition < 0.64) return 'media';
        if (this.characterPosition < 0.8) return 'contact';
        return 'newjourney';
      }
      
      resetJourney() {
        // 右端到達後のリセット
        this.characterPosition = 0;
        this.currentCheckpoint = -1;
        this.isAtCheckpoint = false;
        this.evolutionLevel = 0;
        
        const character = document.querySelector('.tiny-character');
        if (character) {
          character.style.left = '20px';
          character.classList.remove('facing-left', 'facing-right', 'at-checkpoint', 'journey-mode');
          character.classList.add('facing-right'); // 旅立ちは右向き
          
          // 進化レベルをリセット
          for (let i = 1; i <= 5; i++) {
            character.classList.remove(`evolution-level-${i}`);
          }
        }
        
        // カードの表示をリセット
        this.updateSectionDisplay();
        
        // リセット完了エフェクト
        this.showResetEffect();
      }
      
      checkForEvolution() {
        for (let i = 0; i < this.evolutionThresholds.length; i++) {
          if (this.characterPosition >= this.evolutionThresholds[i] && this.evolutionLevel === i) {
            this.evolveCharacter(i + 1);
            break;
          }
        }
      }
      
      evolveCharacter(newLevel) {
        this.evolutionLevel = newLevel;
        const character = document.querySelector('.tiny-character');
        
        if (character) {
          // 前の進化レベルを削除
          for (let i = 1; i <= 5; i++) {
            character.classList.remove(`evolution-level-${i}`);
          }
          
          // 新しい進化レベルを適用
          character.classList.add(`evolution-level-${newLevel}`);
          
          // 進化エフェクトを表示
          this.showEvolutionEffect(character, newLevel);
        }
      }
      
      showEvolutionEffect(character, level) {
        const effect = document.createElement('div');
        effect.className = 'evolution-effect';
        character.appendChild(effect);
        
        setTimeout(() => {
          effect.remove();
        }, 800);
      }
      
      
      showResetEffect() {
        const effect = document.createElement('div');
        effect.className = 'reset-notification';
        effect.textContent = '新しい旅路を歩み始めます...';
        effect.style.cssText = `
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background: linear-gradient(135deg, #4CAF50, #45A049);
          color: white;
          padding: 20px 40px;
          border-radius: 50px;
          font-size: 1.3rem;
          font-weight: 600;
          box-shadow: 0 8px 32px rgba(76, 175, 80, 0.3);
          z-index: 2000;
          opacity: 0;
          animation: resetPop 3s ease forwards;
        `;
        
        document.body.appendChild(effect);
        
        setTimeout(() => {
          effect.remove();
        }, 3000);
      }
    }
    
    // 看板作成システム
    function createSignposts() {
      const container = document.getElementById('signpostContainer');
      if (!container) return;
      
      const signposts = [
        { label: 'スタート', position: 0, icon: '🏁' },
        { label: '会社', position: 20, icon: '🏢' },
        { label: 'アプリ', position: 36, icon: '📱' },
        { label: 'メンバー', position: 52, icon: '👥' },
        { label: 'メディア', position: 68, icon: '📺' },
        { label: 'コンタクト', position: 84, icon: '📧' },
        { label: 'ゴール', position: 100, icon: '🎯' }
      ];
      
      signposts.forEach(signpost => {
        const signpostElement = document.createElement('div');
        signpostElement.className = 'signpost';
        signpostElement.style.left = `${signpost.position}%`;
        signpostElement.innerHTML = `
          <div class="signpost-pole"></div>
          <div class="signpost-board">
            <div class="signpost-icon">${signpost.icon}</div>
            <div class="signpost-label">${signpost.label}</div>
          </div>
        `;
        container.appendChild(signpostElement);
      });
    }
    
    // 初期化
    document.addEventListener('DOMContentLoaded', () => {
      createSignposts();
      new MinimalSite();
    });
  </script>
</body>
</html>