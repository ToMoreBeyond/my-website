# 実装計画

## 概要

本実装計画は、ToMoreBeyondコーポレートサイトの要件定義書（77項目の受入基準）と技術設計書に基づいて生成された、段階的な実装タスクリストです。各タスクは1〜3時間程度で完了できる粒度に分割されており、TDD（テスト駆動開発）方式で実装を進めます。

## タスクリスト

- [ ] 1. プロジェクト基盤の整備と環境セットアップ
- [x] 1.1 依存関係の追加とプロジェクト設定の更新
  - React Hook Form、Zod、Vercel Analytics、Next Sitemapをインストール
  - TypeScript設定を厳格モードに更新し、any型の使用を禁止
  - ESLintとPrettier設定を調整してコード品質を確保
  - 環境変数の型定義とバリデーション機能を実装
  - _Requirements: 全要件の基盤となるプロジェクトセットアップ_

- [x] 1.2 アクセシビリティ基盤とキーボードナビゲーションの実装
  - グローバルなキーボードナビゲーション管理機能を構築
  - フォーカス管理とフォーカストラップ機能を実装
  - スキップリンク（メインコンテンツへジャンプ）を追加
  - ARIA属性の自動設定機能を実装
  - _Requirements: 6.6, 6.7_

- [ ] 2. SEO最適化とメタデータ管理システムの構築
- [ ] 2.1 動的メタデータ生成機能の実装
  - ページごとのメタタイトル、メタディスクリプション生成機能を構築
  - OGP（Open Graph Protocol）タグの動的生成を実装
  - Twitter Cardメタデータの動的生成を実装
  - カノニカルURL管理機能を追加
  - _Requirements: 7.5, 7.7_

- [ ] 2.2 構造化データとサイトマップの実装
  - Organization型の構造化データ（JSON-LD）を生成
  - WebSite型の構造化データ（JSON-LD）を生成
  - SoftwareApplication型の構造化データをプロダクトごとに生成
  - XMLサイトマップの自動生成機能を実装
  - _Requirements: 7.6, 7.8_

- [ ] 3. デザインシステムとブランディングの強化
- [ ] 3.1 Tailwind CSS v4デザインシステムの最適化
  - CSS変数ベースのカラーパレット定義を最適化
  - タイポグラフィスケールとフォントファミリーを調整
  - スペーシングシステム（8pxグリッド）を確認・調整
  - レスポンシブブレークポイントを定義
  - _Requirements: 8.1, 8.2, 8.3, 8.8_

- [ ] 3.2 ダークモード対応とテーマ切り替え機能
  - システムのダークモード設定検出機能を実装
  - ライトモードとダークモードのカラーパレット定義
  - テーマ切り替えアニメーションの実装
  - ユーザー設定の永続化（LocalStorage）
  - _Requirements: 6.8_

- [ ] 4. ヒーローセクションとビジョン表示の実装
- [ ] 4.1 ヒーローセクションの構築
  - 企業名の視覚的に目立つ表示を実装
  - 英語・日本語キャッチコピーの表示を実装
  - アニメーションロゴとジオメトリックシェイプの統合
  - CTAボタンとスムーズスクロールの実装
  - _Requirements: 1.1, 1.2_

- [ ] 4.2 企業コンセプトとビジョンセクションの実装
  - 企業の独自性を表現するテキスト表示を実装
  - 使命ステートメントの表示を実装
  - WHY NOWセクションの課題認識と価値提案を表示
  - スクロールアニメーションの統合
  - _Requirements: 1.3, 1.4, 1.5, 1.6_

- [ ] 5. 提供価値セクションの実装
- [ ] 5.1 3つの主要価値の表示機能
  - 未活用資源の活用セクションを実装
  - プライバシー保護セクションを実装
  - デジタルとリアル融合セクションを実装
  - 各セクションにビジュアルアイコンを統合
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5_

- [ ] 6. プロダクトライン紹介セクションの実装
- [ ] 6.1 プロダクトカードコンポーネントの構築
  - TADATAKA、TOI-RUN、Meet in the middleのプロダクトカード表示
  - 各プロダクトのコンセプトと説明を表示
  - 開発中ステータスバッジの視覚的表示を実装
  - ロードマップリンクの条件付き表示を実装
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 3.8, 3.9, 3.10_

- [ ] 6.2 プロダクト詳細ページの実装
  - 動的ルート（/products/[id]）の詳細ページを構築
  - プロダクトの詳細情報と特徴リストを表示
  - ロードマップセクションの視覚的表示を実装
  - パンくずリストナビゲーションを追加
  - _Requirements: 3.4, 9.7_

- [ ] 7. チーム構成紹介セクションの実装
- [ ] 7.1 チームメンバーカードの構築
  - CDO、CEO、CAOの3名のメンバー情報を表示
  - 役職名（英語・日本語）、名前（漢字・ローマ字）を表示
  - 担当メッセージの表示を実装
  - メンバーごとの視覚的区別（写真、アイコン、カラー）を実装
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 4.7, 4.8_

- [ ] 7.2 チーム詳細ページの実装
  - 動的ルート（/team/[id]）の詳細ページを構築
  - メンバーの詳細情報と経歴を表示
  - ソーシャルリンク（任意）の表示を実装
  - パンくずリストナビゲーションを追加
  - _Requirements: 4.7, 9.7_

- [ ] 8. お問い合わせフォーム機能の実装
- [ ] 8.1 フォームバリデーションとUI構築
  - React Hook FormとZodを使用したフォーム実装
  - 名前、メールアドレス、メッセージフィールドの作成
  - リアルタイムバリデーションの実装
  - フィールドごとのエラーメッセージ表示を実装
  - _Requirements: 5.2, 5.3, 5.4_

- [ ] 8.2 フォーム送信処理とAPIエンドポイント実装
  - /api/contactエンドポイントの作成
  - フォームデータのサーバーサイドバリデーション
  - メール送信機能の実装（SMTP統合）
  - レートリミット（1時間あたり5回）の実装
  - _Requirements: 5.5, 5.6, 5.7_

- [ ] 8.3 フォーム送信後のUX実装
  - 送信成功時の確認メッセージ表示
  - 送信失敗時のエラーメッセージ表示
  - 送信中のローディング状態とボタン無効化
  - 代替連絡手段（メールアドレス、SNS）の表示
  - _Requirements: 5.6, 5.7, 5.8_

- [ ] 9. ナビゲーションとユーザーフローの実装
- [ ] 9.1 グローバルナビゲーションの構築
  - ヘッダーナビゲーションメニューの実装
  - 主要セクション（概要、提供価値、プロダクト、チーム、お問い合わせ）へのリンク
  - スムーズスクロール機能の実装
  - 現在閲覧中セクションのハイライト表示（任意）
  - _Requirements: 9.1, 9.2, 9.3, 9.4_

- [ ] 9.2 モバイルナビゲーションとハンバーガーメニュー
  - モバイルビューポートでのハンバーガーメニュー実装
  - メニュー開閉アニメーション
  - メニュー外クリックでの自動クローズ
  - キーボードナビゲーション（Escapeキーでクローズ）
  - _Requirements: 6.4, 9.2_

- [ ] 9.3 フッターと補足情報の実装
  - フッターレイアウトの構築
  - 企業情報、プライバシーポリシー、利用規約リンクの追加
  - SNSリンクの表示
  - ロゴクリックでトップへ戻る機能
  - _Requirements: 9.5, 9.6_

- [ ] 9.4 エラーページの実装
  - カスタム404ページの作成
  - わかりやすいエラーメッセージの表示
  - トップページへの誘導リンク
  - エラーバウンダリコンポーネントの実装
  - _Requirements: 9.8_

- [ ] 10. レスポンシブデザインとアクセシビリティの実装
- [ ] 10.1 レスポンシブレイアウトの調整
  - デスクトップレイアウトの最適化
  - タブレットレイアウトの最適化
  - モバイルレイアウトの最適化
  - ブラウザリサイズ時のリアルタイム調整
  - _Requirements: 6.1, 6.2, 6.3, 6.5_

- [ ] 10.2 アクセシビリティ機能の実装
  - すべてのインタラクティブ要素へのキーボードアクセス確保
  - 画像へのalt属性追加
  - 見出し階層構造の確認と調整
  - リンクへの明確なテキスト追加
  - _Requirements: 6.6, 6.7_

- [ ] 11. パフォーマンス最適化の実装
- [ ] 11.1 画像最適化とレイジーローディング
  - Next.js Imageコンポーネントへの移行
  - WebP/AVIF自動変換の設定
  - レスポンシブ画像（srcset）の実装
  - 遅延読み込み（lazy loading）の実装
  - _Requirements: 7.4_

- [ ] 11.2 コード分割と動的インポート
  - コンタクトフォームの動的インポート
  - アニメーションライブラリの遅延読み込み
  - クライアントコンポーネントの最小化
  - バンドルサイズの分析と最適化
  - _Requirements: 7.1, 7.2, 7.3_

- [ ] 11.3 Core Web Vitals目標達成のための最適化
  - LCP（Largest Contentful Paint）3秒以内の達成
  - FCP（First Contentful Paint）2.5秒以内の達成
  - FID（First Input Delay）100ms以内の達成
  - CLS（Cumulative Layout Shift）0.1以下の達成
  - _Requirements: 7.1, 7.2, 7.3_

- [ ] 12. ロードマップ表示機能の実装（拡張機能）
- [ ] 12.1 ロードマップデータ構造の実装
  - RoadmapPhase型の定義と実装
  - プロダクトごとのロードマップデータ作成
  - ロードマップステータス（completed/in_progress/planned）の管理
  - 目標日付の表示フォーマット実装
  - _Requirements: 10.3, 10.4_

- [ ] 12.2 ロードマップ視覚化コンポーネントの構築
  - タイムライン形式のロードマップ表示
  - 各フェーズの開発ステージと機能の表示
  - ステータスに応じた色分けとアイコン表示
  - レスポンシブ対応のロードマップレイアウト
  - _Requirements: 10.4, 10.5_

- [ ] 13. CMS連携準備とデータ抽象化
- [ ] 13.1 データアダプターインターフェースの実装
  - CMSAdapter抽象インターフェースの定義
  - StaticDataAdapterの実装（現在の静的データ対応）
  - プロダクトデータ取得機能の実装
  - チームデータ取得機能の実装
  - _Requirements: 10.1, 10.2, 10.6, 10.7_

- [ ] 13.2 コンテンツ更新通知機能の基盤実装
  - 更新日時の管理機能
  - NEWバッジ表示ロジックの実装
  - コンテンツ変更検出機能
  - 将来的なCMS統合のためのフック実装
  - _Requirements: 10.5_

- [ ] 14. テスト実装とQA
- [ ] 14.1 ユニットテストの作成
  - フォームバリデーション（Zodスキーマ）のテスト
  - SEOユーティリティ関数のテスト
  - データアダプターのテスト
  - 値オブジェクト（ContactName、Email、Message）のテスト
  - _Requirements: 全要件のロジック検証_

- [ ] 14.2 インテグレーションテストの作成
  - ContactFormフォーム送信フローのテスト
  - プロダクト一覧表示と詳細ページ遷移のテスト
  - ナビゲーション（ヘッダー、モバイルメニュー）のテスト
  - エラーハンドリング（404、エラーバウンダリ）のテスト
  - _Requirements: 全要件の統合検証_

- [ ] 14.3 E2Eテストの作成（Playwright）
  - トップページからプロダクト詳細へのフロー
  - お問い合わせフォーム送信フロー
  - レスポンシブナビゲーション（モバイル、タブレット、デスクトップ）
  - キーボードナビゲーションのテスト
  - _Requirements: ユーザーシナリオの検証_

- [ ] 14.4 パフォーマンステストの実施
  - Lighthouse監査の実行（Performance 90以上、Accessibility 95以上）
  - Core Web Vitals測定と目標達成確認
  - 画像最適化の検証（WebP配信、lazy loading）
  - バンドルサイズ分析（初期JavaScript < 200KB gzip）
  - _Requirements: 7.1, 7.2, 7.3, 7.4_

- [ ] 15. セキュリティ強化とエラーハンドリング
- [ ] 15.1 フォームセキュリティの実装
  - スパム対策（レートリミット）の実装
  - XSS対策（入力サニタイゼーション）の実装
  - CSRF保護の確認と強化
  - Content Security Policy（CSP）ヘッダーの設定
  - _Requirements: 5.5, 5.6, 5.7_

- [ ] 15.2 エラーハンドリングとロギングの実装
  - グローバルエラーバウンダリの実装
  - カスタム404/500エラーページの実装
  - クライアントサイドエラーロギング
  - サーバーサイドエラーロギングとモニタリング
  - _Requirements: 全要件のエラー対応_

- [ ] 16. 最終統合とデプロイ準備
- [ ] 16.1 全機能の統合テスト
  - すべてのセクションの表示確認
  - ページ間遷移の動作確認
  - フォーム送信の動作確認
  - レスポンシブ対応の最終確認
  - _Requirements: 全要件の総合検証_

- [ ] 16.2 本番環境デプロイの準備
  - 環境変数の本番設定
  - Vercelデプロイ設定の最適化
  - アナリティクス設定の確認
  - ドメイン設定とDNS設定の確認
  - _Requirements: 全要件の本番環境対応_

## タスク実行ガイド

### 実装方針

- **TDD（テスト駆動開発）**: 各タスクでテストを先に書き、次に実装を行う
- **段階的統合**: 各タスク完了後、既存機能との統合を確認
- **コミット頻度**: 各サブタスク（1.1, 1.2...）完了後にコミット
- **レビュー**: 各メジャータスク（1, 2, 3...）完了後にコードレビュー

### 推奨実行順序

タスクは番号順に実行することを推奨しますが、以下の依存関係に注意してください：

- タスク1（プロジェクト基盤）は最優先で実行
- タスク2（SEO）、3（デザインシステム）は並行実行可能
- タスク4〜9（各セクション実装）は依存関係が少ないため、並行実行可能
- タスク10（レスポンシブ）、11（パフォーマンス）は各セクション完了後に実行
- タスク12〜13（拡張機能）は基本機能完了後に実行
- タスク14〜16（テスト、セキュリティ、デプロイ）は最後に実行

### 次のステップ

タスクが承認されたら、以下のコマンドで実装を開始してください：

```bash
/kiro:spec-impl kiro-sdd-workflow          # すべての未完了タスクを実行
/kiro:spec-impl kiro-sdd-workflow 1.1      # 特定のタスクを実行
/kiro:spec-impl kiro-sdd-workflow 1,2,3    # 複数タスクを実行
```

## 要件カバレッジ

すべての要件定義書の受入基準（77項目）が以下のタスクでカバーされています：

- **要件1（サイト概要とビジョン）**: タスク4
- **要件2（提供価値）**: タスク5
- **要件3（プロダクト）**: タスク6
- **要件4（チーム）**: タスク7
- **要件5（お問い合わせ）**: タスク8
- **要件6（レスポンシブ&アクセシビリティ）**: タスク1.2, 10
- **要件7（パフォーマンス&SEO）**: タスク2, 11
- **要件8（デザインシステム）**: タスク3
- **要件9（ナビゲーション）**: タスク9
- **要件10（ロードマップ&CMS）**: タスク12, 13

すべてのタスクは、設計書で定義されたコンポーネント、インターフェース、データモデルに基づいて実装されます。
